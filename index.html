<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Horror Oracle</title>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Roboto:wght@300;400;500;700&family=Nosifer&family=Bebas+Neue&family=Oswald:wght@400;600&family=Cinzel+Decorative:wght@400;700&family=Cinzel:wght@400;600;700&family=Spectral+SC:wght@400;600;700&family=IM+Fell+English+SC&family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg-color: #0a0a0a;
      --text-color: #e0e0e0;
      --accent-color: #b91c1c;
      --secondary-color: #7d1414;
      --input-bg: #1a1a1a;
      --chat-bg: #111111;
      --user-bubble: #333;
      --bot-bubble: #222;
      --blood-color: #7d0b0b;
      /* Oracle Trial CSS Variables */
      --oracle-red: #ff0000;
      --oracle-red-dark: #8b0000;
      --oracle-red-glow: rgba(255, 0, 0, 0.6);
      --oracle-red-glow-strong: rgba(255, 0, 0, 0.9);
      --oracle-bg-dark: rgba(0, 0, 0, 0.9);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      text-align: left;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background-image: 
        radial-gradient(ellipse at 50% 20%, rgba(139, 0, 0, 0.15), transparent 50%),
        linear-gradient(to bottom, #200122, #060107, #000000);
      position: relative;
    }

    /* Cinematic fog overlay */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.02) 0%, transparent 50%),
        radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.015) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.01) 0%, transparent 50%);
      opacity: 0.7;
      animation: fogDrift 120s linear infinite;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes fogDrift {
      0% {
        transform: translateX(0) translateY(0);
      }
      25% {
        transform: translateX(-50px) translateY(30px);
      }
      50% {
        transform: translateX(50px) translateY(-20px);
      }
      75% {
        transform: translateX(-30px) translateY(40px);
      }
      100% {
        transform: translateX(0) translateY(0);
      }
    }

    /* Vignette effect for depth */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.4) 100%);
      pointer-events: none;
      z-index: 2;
    }

    .creepster {
      font-family: 'Creepster', cursive;
    }

    .nosifer {
      font-family: 'Nosifer', cursive;
    }

    .bebas {
      font-family: 'Bebas Neue', cursive;
    }

    .oswald {
      font-family: 'Oswald', sans-serif;
    }

    /* Main container layout */
    .container {
      display: flex;
      flex: 1;
      padding: 1rem;
      gap: 1.5rem;
      position: relative;
      max-height: calc(100vh - 80px);
      z-index: 10;
    }

    /* Side panel styling */
    .side-panel {
      width: 200px;
      background: rgba(17, 17, 17, 0.85);
      border: 1px solid rgba(139, 0, 0, 0.3);
      border-radius: 12px;
      padding: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease-in-out;
      max-height: calc(100vh - 100px);
      overflow-y: auto;
      box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(139, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .side-panel.collapsed {
      width: 60px;
      overflow: hidden;
      align-items: center;
      padding: 0.5rem;
    }

    .side-panel-title {
  color: var(--accent-color);
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  text-align: center;
  margin-bottom: 8px;
  text-shadow: 
    0 0 8px rgba(255, 0, 0, 0.6),
    0 0 15px rgba(139, 0, 0, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.8);
  font-size: 0.8rem;
  animation: subtleBreath 4s ease-in-out infinite;
}

@keyframes subtleBreath {
  0%, 100% {
    text-shadow: 
      0 0 8px rgba(255, 0, 0, 0.6),
      0 0 15px rgba(139, 0, 0, 0.4),
      0 2px 4px rgba(0, 0, 0, 0.8);
  }
  50% {
    text-shadow: 
      0 0 12px rgba(255, 0, 0, 0.8),
      0 0 25px rgba(139, 0, 0, 0.6),
      0 2px 4px rgba(0, 0, 0, 0.8);
  }
}

/* MY LIST - SUPER CREEPY STYLING */
#my-list-title {
  font-family: 'Nosifer', cursive;
  font-size: 1rem;
  color: #ff0000;
  text-shadow: 0 0 20px #ff0000, 0 0 40px #8b0000, 0 2px 4px rgba(0,0,0,0.8);
  animation: bloodPulse 2s infinite, drip 3s infinite;
  border: 3px solid #ff0000;
  border-radius: 8px;
  padding: 12px 8px;
  background: linear-gradient(135deg, rgba(139, 0, 0, 0.4), rgba(0, 0, 0, 0.8));
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.6), inset 0 0 20px rgba(139, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

#my-list-title::before {
  content: 'ü©∏';
  position: absolute;
  left: 8px;
  animation: pulse 1.5s infinite;
}

#my-list-title::after {
  content: 'ü©∏';
  position: absolute;
  right: 8px;
  animation: pulse 1.5s infinite 0.75s;
}

@keyframes bloodPulse {
  0%, 100% { 
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.6), inset 0 0 20px rgba(139, 0, 0, 0.3);
  }
  50% { 
    box-shadow: 0 0 50px rgba(255, 0, 0, 0.9), inset 0 0 30px rgba(139, 0, 0, 0.5);
  }
}

@keyframes drip {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(2px); }
}
    /* PHASE 1: Horror Profile Badge */
    .profile-badge-container {
      background: linear-gradient(135deg, rgba(139, 0, 0, 0.35), rgba(0, 0, 0, 0.7));
      border: 2px solid #b91c1c;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      text-align: center;
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.5),
        0 0 15px rgba(185, 28, 28, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      animation: profilePulse 3s ease-in-out infinite;
      transition: all 0.3s ease;
    }

    @keyframes profilePulse {
      0%, 100% { 
        box-shadow: 
          0 6px 20px rgba(0, 0, 0, 0.5),
          0 0 15px rgba(185, 28, 28, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      50% { 
        box-shadow: 
          0 8px 25px rgba(0, 0, 0, 0.6),
          0 0 30px rgba(185, 28, 28, 0.7),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }
    }

    .profile-badge-container:hover {
      transform: scale(1.02);
      box-shadow: 
        0 8px 25px rgba(0, 0, 0, 0.6),
        0 0 30px rgba(185, 28, 28, 0.7),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }

    .profile-icon {
      font-size: 2.5rem;
      margin-bottom: 5px;
      filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.5));
    }

    .profile-name {
      font-family: 'Bebas Neue', cursive;
      font-size: 0.9rem;
      color: white;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      letter-spacing: 1px;
    }

    /* Trailer Section Styling */
    .trailer-title {
      font-family: 'Bebas Neue', cursive;
      background: linear-gradient(180deg, #fff 0%, #ddd 50%, #888 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-transform: uppercase;
      letter-spacing: 2.5px;
      font-size: 0.9rem;
      text-align: center;
      margin-bottom: 10px;
      position: relative;
      filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.3)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8));
      animation: trailerShimmer 3s ease-in-out infinite;
    }

    @keyframes trailerShimmer {
      0%, 100% {
        filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.3)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8));
      }
      50% {
        filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.5)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8));
      }
    }

    .trailer-title::after {
      content: 'üé¨';
      position: absolute;
      right: -20px;
      -webkit-text-fill-color: initial;
      filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
      animation: pulse 2s infinite;
    }

    .movie-title-streaming {
      font-family: 'Oswald', sans-serif;
      color: white;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      font-size: 0.85rem;
      margin-bottom: 8px;
      text-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.9),
        0 0 10px rgba(255, 0, 0, 0.3),
        0 0 20px rgba(139, 0, 0, 0.2);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .movie-title-streaming:hover {
      color: var(--accent-color);
      transform: scale(1.05) translateX(3px);
      text-shadow: 
        0 2px 6px rgba(0, 0, 0, 0.9),
        0 0 20px rgba(255, 0, 0, 0.7),
        0 0 35px rgba(185, 28, 28, 0.5);
      letter-spacing: 2px;
    }

    /* Community Stats Styling */
    .stats-container {
      padding: 8px;
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(25, 25, 25, 0.3));
      border-radius: 8px;
      margin-bottom: 10px;
      border: 1px solid rgba(185, 28, 28, 0.15);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.03);
      transition: all 0.3s ease;
    }

    .stats-container:hover {
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.03);
      border-color: rgba(185, 28, 28, 0.25);
    }

    .current-movie-title {
      font-family: 'Oswald', sans-serif;
      color: white;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 10px;
      text-align: center;
      text-shadow: 
        0 0 10px rgba(255, 0, 0, 0.6),
        0 0 20px rgba(139, 0, 0, 0.4),
        0 2px 4px rgba(0, 0, 0, 0.8);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      animation: titleGlow 3s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% {
        text-shadow: 
          0 0 10px rgba(255, 0, 0, 0.6),
          0 0 20px rgba(139, 0, 0, 0.4),
          0 2px 4px rgba(0, 0, 0, 0.8);
      }
      50% {
        text-shadow: 
          0 0 15px rgba(255, 0, 0, 0.8),
          0 0 30px rgba(139, 0, 0, 0.6),
          0 2px 4px rgba(0, 0, 0, 0.8);
      }
    }

    .rating-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .stars-display {
      color: #ffd700;
      font-size: 1.2rem;
      letter-spacing: 2px;
    }

    .rating-number {
      color: white;
      font-size: 1.1rem;
      font-weight: bold;
    }

    .rating-count {
      color: #888;
      font-size: 0.7rem;
    }

    .horror-metrics {
      margin-bottom: 12px;
    }

    .metric-bar {
      margin-bottom: 8px;
    }

    .metric-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.7rem;
      margin-bottom: 3px;
    }

    .metric-label span:first-child {
      color: #aaa;
    }

    .metric-label span:last-child {
      color: white;
      font-weight: bold;
    }

    .metric-progress {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .metric-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .gore-fill {
      background: linear-gradient(90deg, #7d0b0b, #ff0000);
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
      animation: gorePulse 2s ease-in-out infinite;
    }

    @keyframes gorePulse {
      0%, 100% { 
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        filter: brightness(1);
      }
      50% { 
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
        filter: brightness(1.2);
      }
    }

    .fear-fill {
      background: linear-gradient(90deg, #4a0080, #9400d3);
      box-shadow: 0 0 10px rgba(148, 0, 211, 0.5);
      animation: fearPulse 2.5s ease-in-out infinite;
    }

    @keyframes fearPulse {
      0%, 100% { 
        box-shadow: 0 0 10px rgba(148, 0, 211, 0.5);
        filter: brightness(1);
      }
      50% { 
        box-shadow: 0 0 20px rgba(148, 0, 211, 0.8);
        filter: brightness(1.3);
      }
    }

    .kill-fill {
      background: linear-gradient(90deg, #333, #666);
      box-shadow: 0 0 8px rgba(102, 102, 102, 0.4);
      animation: killPulse 3s ease-in-out infinite;
    }

    @keyframes killPulse {
      0%, 100% { 
        box-shadow: 0 0 8px rgba(102, 102, 102, 0.4);
      }
      50% { 
        box-shadow: 0 0 15px rgba(102, 102, 102, 0.6);
      }
    }

    /* Rate This Movie Section */
    .rate-movie-section {
      background: linear-gradient(135deg, rgba(185, 28, 28, 0.12), rgba(139, 0, 0, 0.08));
      border: 1px solid rgba(185, 28, 28, 0.4);
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.4),
        0 0 15px rgba(185, 28, 28, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      transition: all 0.3s ease;
    }

    .rate-movie-section:hover {
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.5),
        0 0 20px rgba(185, 28, 28, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      border-color: rgba(185, 28, 28, 0.5);
    }

    .rate-prompt {
      font-size: 0.75rem;
      color: #ccc;
      text-align: center;
      margin-bottom: 8px;
    }

    .star-rating {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin-bottom: 8px;
    }

    .star {
      font-size: 1.5rem;
      cursor: pointer;
      color: #444;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5));
    }

    .star:hover {
      color: #ffd700;
      transform: scale(1.3) rotate(15deg);
      filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8));
    }

    .star:active {
      transform: scale(1.1) rotate(0deg);
    }

    .star.filled {
      color: #ffd700;
      animation: starShine 2s ease-in-out infinite;
      filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.6));
    }

    @keyframes starShine {
      0%, 100% { 
        filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.6));
      }
      50% { 
        filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.9));
      }
    }

    .star.hover {
      color: #ffd700;
      opacity: 0.7;
      filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.5));
    }

    /* Quick Review Section */
    .quick-review-section {
      margin-bottom: 10px;
    }

    .review-input {
      width: 100%;
      padding: 6px 8px;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid #444;
      border-radius: 4px;
      color: white;
      font-size: 0.7rem;
      margin-bottom: 6px;
      transition: all 0.3s ease;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .review-input:focus {
      outline: none;
      border-color: var(--accent-color);
      background: rgba(0, 0, 0, 0.6);
      box-shadow: 
        inset 0 2px 4px rgba(0, 0, 0, 0.4),
        0 0 15px rgba(185, 28, 28, 0.3),
        0 0 5px rgba(185, 28, 28, 0.5);
    }

    .submit-review-btn {
      width: 100%;
      padding: 5px;
      background: var(--secondary-color);
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      transform: translateY(0);
    }

    .submit-review-btn:hover {
      background: var(--accent-color);
      transform: translateY(-1px);
      box-shadow: 
        0 4px 12px rgba(185, 28, 28, 0.4),
        0 0 15px rgba(185, 28, 28, 0.2);
    }

    .submit-review-btn:active {
      transform: translateY(0) scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);
    }

    /* Recent Reviews */
    .recent-reviews {
      max-height: 100px;
      overflow-y: auto;
    }

    .review-item {
      background: rgba(0, 0, 0, 0.3);
      border-left: 2px solid var(--accent-color);
      padding: 6px;
      margin-bottom: 6px;
      font-size: 0.65rem;
    }

    .review-text {
      color: #ccc;
      font-style: italic;
    }

    .review-meta {
      color: #666;
      font-size: 0.6rem;
      margin-top: 3px;
    }

    .hidden {
      display: none;
    }

    /* Info button styling */
    .info-btn {
      position: relative;
      overflow: hidden;
      border: 2px solid var(--accent-color);
      box-shadow: 0 0 10px var(--accent-color);
      transition: all 0.2s ease;
      transform: translateY(0);
    }

    .info-btn:hover {
      box-shadow: 
        0 0 20px var(--accent-color),
        0 5px 15px rgba(0, 0, 0, 0.4);
      background-color: rgba(185, 28, 28, 0.2);
      transform: translateY(-2px);
    }

    .info-btn:active {
      transform: translateY(0) scale(0.98);
      box-shadow: 
        0 0 15px var(--accent-color),
        0 2px 8px rgba(0, 0, 0, 0.6);
    }

    .info-btn:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 150%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.8s ease-in-out;
    }

    .info-btn:hover:before {
      transform: translateX(100%);
    }

    /* Chat window styling */
    .chat-window {
      flex: 2;
      display: flex;
      flex-direction: column;
      background: rgba(17, 17, 17, 0.9);
      border: 1px solid rgba(139, 0, 0, 0.3);
      border-radius: 12px;
      position: relative;
      z-index: 1;
      overflow: hidden;
      max-height: calc(100vh - 120px);
      box-shadow: 
        0 10px 50px rgba(0, 0, 0, 0.7),
        0 0 30px rgba(139, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .chat-history {
      flex: 1;
      padding: 0.5rem;
      overflow-y: auto;
      scroll-behavior: smooth;
      min-height: 0;
    }

    #initial-horror-image {
      flex-shrink: 0;
      margin: 1.5rem 0;
    }

    .chat-input-area {
      padding: 1rem;
      background: var(--chat-bg);
      border-top: 1px solid #333;
      display: flex;
      gap: 0.5rem;
      margin-top: auto;
      flex-shrink: 0;
    }

    .chat-bubble {
      max-width: 85%;
      padding: 0.5rem;
      border-radius: 1rem;
      margin-bottom: 0.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }

    .user-bubble {
      background: linear-gradient(135deg, rgba(51, 51, 51, 0.9), rgba(40, 40, 40, 0.9));
      align-self: flex-end;
      color: var(--text-color);
      margin-left: auto;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .user-bubble:hover {
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .bot-bubble {
      background: linear-gradient(135deg, rgba(34, 34, 34, 0.9), rgba(25, 25, 25, 0.9));
      align-self: flex-start;
      color: var(--text-color);
      animation: fadeIn 0.5s ease-in-out;
      margin-bottom: 0.5rem;
      border: 1px solid rgba(185, 28, 28, 0.2);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.5),
        0 0 10px rgba(185, 28, 28, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .bot-bubble:hover {
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.6),
        0 0 15px rgba(185, 28, 28, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .movie-link {
        color: var(--text-color);
        font-weight: 500;
        text-decoration: underline;
        cursor: pointer;
    }

    /* Movie poster in chat bubble */
    .movie-poster-inline {
      width: 100px;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid var(--accent-color);
      margin: 10px 0;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.7),
        0 0 15px rgba(185, 28, 28, 0.3);
      transition: all 0.3s ease;
    }

    .movie-poster-inline:hover {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 
        0 12px 30px rgba(0, 0, 0, 0.8),
        0 0 25px rgba(185, 28, 28, 0.5);
    }

    /* Horror genre tags */
    .horror-genre-tag {
      display: inline-block;
      padding: 5px 10px;
      background: linear-gradient(135deg, var(--accent-color), var(--secondary-color));
      color: white;
      border-radius: 15px;
      font-weight: bold;
      font-size: 0.75rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: genrePulse 2s infinite;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .horror-genre-tag:hover {
      transform: translateY(-3px) scale(1.1) rotate(-1deg);
      box-shadow: 
        0 8px 20px rgba(185, 28, 28, 0.6),
        0 0 25px rgba(185, 28, 28, 0.3);
      background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
      animation: genrePulseHover 0.6s infinite;
    }

    .horror-genre-tag:active {
      transform: translateY(-1px) scale(1.05);
      box-shadow: 0 4px 10px rgba(185, 28, 28, 0.5);
    }

    @keyframes genrePulseHover {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }

    .horror-genre-tag:nth-child(odd) {
      animation-delay: 0.2s;
    }

    .horror-genre-tag:nth-child(even) {
      animation-delay: 0.4s;
    }

    /* PHASE 1: Favorite genre indicator */
    .horror-genre-tag.favorite {
      border: 3px solid #ffd700;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
    }

    @keyframes genrePulse {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-2px);
      }
    }

    /* Obscure Horror Movies Grid */
    .obscure-movies-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-bottom: 1rem;
      min-height: 140px;
    }

    .obscure-movie-item {
      background: rgba(25, 25, 25, 0.8);
      border-radius: 6px;
      padding: 6px;
      border: 1px solid #444;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      min-height: 130px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .obscure-movie-item:hover {
      border-color: var(--accent-color);
      transform: translateY(-4px) scale(1.03);
      box-shadow: 
        0 6px 20px rgba(185, 28, 28, 0.3),
        0 0 15px rgba(185, 28, 28, 0.2);
    }

    .obscure-movie-item:active {
      transform: translateY(-2px) scale(1.01);
    }

    .obscure-poster {
      width: 100%;
      height: 80px;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 4px;
    }

    .obscure-video {
      width: 100%;
      height: 80px;
      border-radius: 4px;
      margin-bottom: 4px;
      display: none;
    }

    .obscure-movie-item.playing .obscure-poster {
      display: none;
    }

    .obscure-movie-item.playing .obscure-video {
      display: block;
    }

    .obscure-title {
      font-size: 0.7rem;
      font-weight: bold;
      color: #fff;
      margin-bottom: 2px;
      text-align: center;
    }

    .obscure-year {
      font-size: 0.6rem;
      color: #aaa;
      text-align: center;
      margin-bottom: 3px;
    }

    .dvd-link {
      font-size: 0.6rem;
      color: var(--accent-color);
      text-decoration: underline;
      text-align: center;
      display: block;
    }

    /* Video Modal */
    .video-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .video-container {
      position: relative;
      width: 80%;
      max-width: 600px;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
    }

    .video-close {
      position: absolute;
      top: 10px;
      right: 15px;
      color: white;
      font-size: 24px;
      cursor: pointer;
      z-index: 1001;
    }

    .video-iframe {
      width: 100%;
      height: 300px;
      border: none;
    }

    /* Movie poster for streaming section */
    .streaming-movie-poster {
      width: 50px;
      height: 75px;
      object-fit: cover;
      border-radius: 4px;
      border: 1px solid rgba(185, 28, 28, 0.4);
      margin-right: 10px;
      float: left;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .streaming-movie-poster:hover {
      transform: scale(1.1) translateY(-2px) rotate(2deg);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.6),
        0 0 15px rgba(185, 28, 28, 0.3);
      border-color: rgba(185, 28, 28, 0.7);
    }

    .streaming-movie-poster:active {
      transform: scale(1.05) translateY(0);
    }

    /* Streaming availability */
    .streaming-tag {
      display: inline-block;
      font-size: 0.65rem;
      padding: 1px 4px;
      border-radius: 3px;
      margin-right: 4px;
      margin-bottom: 4px;
    }

    .streaming-netflix {
      background: #E50914;
      color: white;
    }

    .streaming-prime {
      background: #00A8E1;
      color: white;
    }

    .streaming-hulu {
      background: #1CE783;
      color: black;
    }

    .streaming-shudder {
      background: #BE0000;
      color: white;
    }

    .streaming-hbo {
      background: #5822B4;
      color: white;
    }

    /* Theater section */
    .theater-section {
      background: linear-gradient(135deg, rgba(125, 20, 20, 0.4), rgba(0, 0, 0, 0.6));
      border-radius: 8px;
      padding: 8px;
      margin-bottom: 1rem;
      border: 1px solid rgba(185, 28, 28, 0.6);
      box-shadow: 0 0 15px rgba(185, 28, 28, 0.3);
      position: relative;
      overflow: hidden;
    }

    .theater-section::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #b91c1c, #7d1414, #b91c1c);
      border-radius: 8px;
      opacity: 0.5;
      z-index: -1;
      animation: borderGlow 3s ease-in-out infinite;
    }

    @keyframes borderGlow {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.7; }
    }

    .theater-item {
      display: flex;
      align-items: center;
      padding: 6px 4px;
      margin-bottom: 8px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 6px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }

    .theater-item:hover {
      background: rgba(185, 28, 28, 0.25);
      transform: translateX(8px) scale(1.02);
      box-shadow: 
        0 4px 12px rgba(185, 28, 28, 0.3),
        0 0 15px rgba(185, 28, 28, 0.2);
    }

    .theater-item:active {
      transform: translateX(5px) scale(1);
    }

    .theater-poster {
      width: 50px;
      height: 75px;
      object-fit: cover;
      border-radius: 4px;
      margin-right: 8px;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.8),
        0 0 8px rgba(185, 28, 28, 0.2);
      border: 1px solid rgba(185, 28, 28, 0.5);
      transition: all 0.3s ease;
    }

    .theater-poster:hover {
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.9),
        0 0 15px rgba(185, 28, 28, 0.4);
      transform: scale(1.05);
    }

    .theater-info {
      flex: 1;
      min-width: 0;
    }

    .theater-title {
      font-size: 0.75rem;
      font-weight: bold;
      color: #fff;
      text-shadow: 
        0 0 8px rgba(255, 255, 255, 0.4),
        0 0 15px rgba(185, 28, 28, 0.2),
        0 2px 4px rgba(0, 0, 0, 0.8);
      margin-bottom: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
    }

    .theater-date {
      font-size: 0.6rem;
      color: #ff6b6b;
      font-weight: 500;
    }

    .theater-rating {
      font-size: 0.55rem;
      color: #ffd700;
      margin-top: 2px;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* Horror effects */
    @keyframes flicker {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.8;
      }
      20%, 80% {
        opacity: 0.9;
      }
    }

    .flicker {
      animation: flicker 0.1s infinite;
    }

    @keyframes bloodFall {
      0% {
        transform: translateY(-200px) scale(0);
        opacity: 0;
        height: 15px;
      }
      10% {
        transform: translateY(0) scale(1);
        opacity: 0.8;
        height: 15px;
      }
      50% {
        height: 40px;
        opacity: 0.7;
      }
      100% {
        transform: translateY(100vh);
        height: 10px;
        opacity: 0;
      }
    }

    .blood-drop {
      position: fixed;
      background-color: var(--blood-color);
      border-radius: 50% 50% 45% 50%;
      transform: rotate(20deg);
      filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
      animation: bloodFall 7s ease-in-out forwards;
      pointer-events: none;
      z-index: 100;
    }

    .blood-splatter {
      position: fixed;
      width: 40px;
      height: 40px;
      background-color: var(--blood-color);
      border-radius: 40% 60% 60% 20%;
      transform: rotate(0deg);
      opacity: 0;
      pointer-events: none;
      z-index: 101;
      animation: splatter 4s ease-in-out forwards;
    }

    @keyframes splatter {
      0% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
      }
      10% {
        opacity: 0.9;
        transform: scale(1.2) rotate(20deg);
      }
      90% {
        opacity: 0.7;
      }
      100% {
        opacity: 0;
        transform: scale(1) rotate(45deg);
      }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }
    ::-webkit-scrollbar-track {
      background: #0a0a0a;
    }
    ::-webkit-scrollbar-thumb {
      background: var(--accent-color);
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #d42222;
    }

    .skeleton-loading {
        background: linear-gradient(90deg, #222 25%, #333 50%, #222 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }

    @keyframes loading {
        0% {
            background-position: 200% 0;
        }
        100% {
            background-position: -200% 0;
        }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .logo-glow {
      text-shadow: 
        0 0 8px var(--accent-color), 
        0 0 15px var(--accent-color), 
        0 0 25px var(--accent-color),
        0 2px 4px rgba(0, 0, 0, 0.8);
      transition: all 0.3s ease-in-out;
      animation: logoBreath 4s ease-in-out infinite;
    }

    @keyframes logoBreath {
      0%, 100% {
        text-shadow: 
          0 0 8px var(--accent-color), 
          0 0 15px var(--accent-color), 
          0 0 25px var(--accent-color),
          0 2px 4px rgba(0, 0, 0, 0.8);
      }
      50% {
        text-shadow: 
          0 0 12px var(--accent-color), 
          0 0 25px var(--accent-color), 
          0 0 40px var(--accent-color),
          0 2px 4px rgba(0, 0, 0, 0.8);
      }
    }

    .logo-glow:hover {
      text-shadow: 
        0 0 15px var(--accent-color), 
        0 0 30px var(--accent-color), 
        0 0 50px var(--accent-color),
        0 2px 6px rgba(0, 0, 0, 0.9);
      animation: logoBreathFast 1s ease-in-out infinite;
    }

    @keyframes logoBreathFast {
      0%, 100% {
        text-shadow: 
          0 0 15px var(--accent-color), 
          0 0 30px var(--accent-color), 
          0 0 50px var(--accent-color),
          0 2px 6px rgba(0, 0, 0, 0.9);
      }
      50% {
        text-shadow: 
          0 0 20px var(--accent-color), 
          0 0 40px var(--accent-color), 
          0 0 65px var(--accent-color),
          0 2px 6px rgba(0, 0, 0, 0.9);
      }
    }

    @keyframes pulse-once {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .pulse-once {
      animation: pulse-once 0.5s ease-in-out;
    }

    /* Recommendation card styling */
    .rec-card {
      background: rgba(40, 40, 40, 0.6);
      border: 1px solid rgba(68, 68, 68, 0.8);
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      margin-bottom: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    .rec-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 
        0 10px 30px rgba(185, 28, 28, 0.4),
        0 0 20px rgba(185, 28, 28, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      border-color: var(--accent-color);
    }

    .rec-card:active {
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 6px 20px rgba(185, 28, 28, 0.3);
    }

    /* Sidebar section styling */
    .sidebar-section {
      position: relative;
      margin-bottom: 1rem;
    }

    .sidebar-section:after {
      content: '';
      display: block;
      width: 100%;
      margin: 0.5rem 0;
    }

    /* Scrollable sections with fixed heights */
    .sidebar-section .max-h-60 {
      max-height: 12rem;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--accent-color) var(--bg-color);
    }

    /* Smoother transitions for blood dividers */
    .border-red-900 {
      box-shadow: 0 0 8px rgba(127, 29, 29, 0.5);
      transition: opacity 0.3s ease;
    }

    .side-panel:hover .border-red-900 {
      opacity: 0.8;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .side-panel {
        width: 100%;
        max-height: 200px;
      }

      .chat-window {
        height: 60vh;
      }

      .quiz-modal {
        padding: 10px;
      }

      .quiz-content {
        width: 95%;
        max-width: 95vw;
        padding: 1rem;
        font-size: 0.95rem;
      }

      .quiz-title {
        font-size: 1.8em;
        gap: 10px;
      }

      .quiz-title::before,
      .quiz-title::after {
        font-size: 0.6em;
      }

      .question-text {
        font-size: 1.1em;
      }

      .quiz-option {
        padding: 14px 16px;
        font-size: 0.95em;
      }

      .quiz-option::before {
        width: 28px;
        height: 28px;
        font-size: 0.85em;
      }

      .oracle-speaks-title {
        font-size: 1.1em;
      }

      .oracle-speaks-text {
        font-size: 1em;
      }

      .bloody-dagger-fill::before {
        font-size: 1.5em;
      }
    }

    @media (max-width: 480px) {
      .quiz-content {
        width: 98%;
        padding: 0.8rem;
      }

      .quiz-title {
        font-size: 1.5em;
      }

      .question-text {
        font-size: 1em;
      }

      .quiz-option {
        padding: 12px;
        font-size: 0.9em;
        gap: 8px;
      }
    }

    /* Centering the page */
    .centered-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1.5rem;
        position: relative;
        z-index: 1;
    }

/* Trailer close button */
    .trailer-close-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: #8b0000;
      color: white;
      border: 2px solid #ff0000;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-size: 20px;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .trailer-close-btn:hover {
      background: #ff0000;
      transform: rotate(90deg);
    }

    /* Compact sections */
    .compact-section {
      margin-bottom: 0.5rem;
    }

    .compact-title {
      font-size: 0.7rem;
      color: var(--accent-color);
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 6px;
      text-shadow: 0 0 3px rgba(255, 0, 0, 0.3);
    }

    /* QUIZ MODAL STYLES - CINEMATIC HORROR REDESIGN */
    .quiz-modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(10, 0, 0, 0.98), rgba(0, 0, 0, 1));
      animation: fadeIn 0.3s;
      backdrop-filter: blur(8px);
    }

    .quiz-modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Fog background animation */
    .quiz-modal::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(60, 0, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(60, 0, 0, 0.15) 0%, transparent 50%);
      animation: fogMove 8s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes fogMove {
      0%, 100% { opacity: 0.4; transform: translateX(0); }
      50% { opacity: 0.7; transform: translateX(20px); }
    }

    .quiz-content {
      background: linear-gradient(135deg, #150000 0%, #0a0000 50%, #000000 100%);
      border: 3px solid #8b0000;
      border-radius: 15px;
      padding: 1.5rem;
      max-width: 800px;
      width: 80%;
      height: auto;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 
        0 0 50px rgba(255, 0, 0, 0.5),
        inset 0 0 60px rgba(0, 0, 0, 0.9);
      margin: 0 auto;
      top: auto;
      transform: none;
      font-size: 1.1rem;
      line-height: 1.4;
      text-align: center;
      /* Faint texture overlay */
      background-image: 
        linear-gradient(135deg, #150000 0%, #0a0000 50%, #000000 100%),
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.01) 2px, rgba(255,255,255,0.01) 4px);
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 20px;
      position: relative;
    }

    /* Fog background behind title */
    .quiz-header::before {
      content: '';
      position: absolute;
      inset: -20px;
      background: radial-gradient(circle at center, rgba(60, 0, 0, 0.2), transparent 70%);
      animation: titleFogShift 6s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes titleFogShift {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.1); }
    }

    .quiz-title {
      color: #ff0000;
      font-size: 2.5em;
      text-shadow: 
        0 0 20px rgba(255, 0, 0, 0.8),
        0 0 40px rgba(255, 0, 0, 0.6),
        2px 2px 8px rgba(0, 0, 0, 0.9);
      font-family: 'Cinzel Decorative', 'Creepster', cursive;
      margin-bottom: 10px;
      letter-spacing: 3px;
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    /* Skull/Eyes icons on either side */
    .quiz-title::before,
    .quiz-title::after {
      content: 'üíÄ';
      font-size: 0.8em;
      animation: skullFloat 3s ease-in-out infinite;
      filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8));
    }

    .quiz-title::after {
      animation-delay: 1.5s;
    }

    @keyframes skullFloat {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-8px) rotate(5deg); }
    }

    /* Fear Level and Loading Indicator */
    .quiz-progress {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }

    .fear-level-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-family: 'Cinzel Decorative', 'Creepster', cursive;
      color: #ff6b6b;
      font-size: 1.2em;
      text-shadow: 0 0 10px rgba(255, 0, 0, 0.6);
      min-height: 30px;
    }

    /* Bloody Dagger Loading Animation */
    .bloody-dagger-container {
      position: relative;
      width: 100%;
      height: 40px;
      background: #1a0000;
      border: 2px solid #8b0000;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 
        inset 0 2px 8px rgba(0, 0, 0, 0.8),
        0 0 15px rgba(139, 0, 0, 0.4);
    }

    .bloody-dagger-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: linear-gradient(90deg, 
        #4a0000 0%, 
        #8b0000 20%, 
        #ff0000 50%, 
        #8b0000 80%, 
        #4a0000 100%);
      animation: bleedProgress 3s ease-in-out;
      box-shadow: 
        0 0 20px rgba(255, 0, 0, 0.8),
        inset 0 -10px 20px rgba(0, 0, 0, 0.5);
      position: relative;
    }

    /* Blood drip effect */
    .bloody-dagger-fill::before {
      content: 'üó°Ô∏è';
      position: absolute;
      right: -10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2em;
      filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8));
      animation: daggerPulse 0.5s ease-in-out infinite;
    }

    /* Blood trail effect */
    .bloody-dagger-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        90deg,
        transparent,
        transparent 10px,
        rgba(139, 0, 0, 0.5) 10px,
        rgba(139, 0, 0, 0.5) 15px
      );
      animation: bloodDrip 2s linear infinite;
    }

    @keyframes bleedProgress {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    @keyframes daggerPulse {
      0%, 100% { transform: translateY(-50%) scale(1); }
      50% { transform: translateY(-50%) scale(1.1); }
    }

    @keyframes bloodDrip {
      0% { transform: translateX(0); opacity: 0.8; }
      100% { transform: translateX(20px); opacity: 0.3; }
    }

    /* Progress bar for quiz questions */
    .progress-axe {
      width: 100%;
      height: 30px;
      background: #2a0000;
      position: relative;
      border: 2px solid #8b0000;
      border-radius: 5px;
      box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.8);
    }

    .blood-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: linear-gradient(90deg, #8b0000, #ff0000);
      border-radius: 3px;
      transition: width 0.5s ease;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
    }

    .blood-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(0, 0, 0, 0.2) 10px,
        rgba(0, 0, 0, 0.2) 20px
      );
      animation: bloodFlow 1s linear infinite;
    }

    @keyframes bloodFlow {
      0% { transform: translateX(0); }
      100% { transform: translateX(20px); }
    }

    .progress-text {
      color: #ff6b6b;
      font-weight: bold;
      min-width: 80px;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 1px;
    }

    /* Oracle Speaks Section */
    .oracle-speaks-section {
      background: linear-gradient(135deg, rgba(26, 0, 0, 0.6), rgba(10, 0, 0, 0.8));
      border: 2px solid #8b0000;
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 0 30px rgba(255, 0, 0, 0.3),
        inset 0 0 40px rgba(0, 0, 0, 0.7);
      animation: oracleFadeIn 0.8s ease-out;
    }

    /* Ghostly Oracle silhouette background */
    .oracle-speaks-section::before {
      content: 'üëÅÔ∏è';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 8em;
      opacity: 0.05;
      filter: blur(3px);
      pointer-events: none;
      animation: ghostlyPulse 4s ease-in-out infinite;
    }

    @keyframes ghostlyPulse {
      0%, 100% { opacity: 0.05; transform: translate(-50%, -50%) scale(1); }
      50% { opacity: 0.15; transform: translate(-50%, -50%) scale(1.1); }
    }

    .oracle-speaks-title {
      font-family: 'Cinzel Decorative', 'Creepster', cursive;
      color: #ff6b6b;
      font-size: 1.3em;
      text-align: center;
      margin-bottom: 15px;
      text-shadow: 0 0 15px rgba(255, 107, 107, 0.8);
      letter-spacing: 2px;
    }

    .oracle-speaks-text {
      font-family: 'Bebas Neue', cursive;
      color: #e0e0e0;
      font-size: 1.1em;
      line-height: 1.6;
      text-align: center;
      position: relative;
      z-index: 1;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
    }

    /* Question Area */
    .quiz-question {
      background: rgba(139, 0, 0, 0.15);
      padding: 25px;
      border-radius: 12px;
      margin: 20px 0;
      border: 1px solid rgba(139, 0, 0, 0.3);
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.6);
    }

    .question-text {
      color: #e0e0e0;
      font-size: 1.3em;
      margin-bottom: 25px;
      font-family: 'Cinzel Decorative', serif;
      font-weight: 500;
      line-height: 1.5;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8);
      letter-spacing: 0.5px;
    }

    /* Answer Options - Gothic Style */
    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .quiz-option {
      padding: 18px 20px;
      background: linear-gradient(135deg, #150000, #0a0000);
      border: 2px solid #4a0000;
      border-radius: 25px;
      color: #e0e0e0;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.05em;
      font-weight: 500;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 
        0 4px 10px rgba(0, 0, 0, 0.6),
        inset 0 1px 2px rgba(255, 255, 255, 0.05);
    }

    /* Letter badges (A, B, C, D) */
    .quiz-option::before {
      content: attr(data-letter);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: #000;
      color: #fff;
      border: 2px solid #4a0000;
      border-radius: 50%;
      font-weight: bold;
      font-size: 0.9em;
      flex-shrink: 0;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
    }

    .quiz-option:hover {
      background: linear-gradient(135deg, #2a0000, #150000);
      border-color: #ff0000;
      transform: translateY(-2px);
      box-shadow: 
        0 0 20px rgba(255, 0, 0, 0.6),
        0 6px 15px rgba(0, 0, 0, 0.8);
    }

    .quiz-option:hover::before {
      border-color: #ff0000;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
    }

    /* Correct Answer - Green Glow + Blood Drip */
    .quiz-option.correct {
      background: linear-gradient(135deg, #004a00, #002a00);
      border-color: #00ff00;
      animation: dripBlood 1s ease-out;
      box-shadow: 
        0 0 30px rgba(0, 255, 0, 0.8),
        0 20px 40px rgba(255, 0, 0, 0.4);
    }

    .quiz-option.correct::before {
      border-color: #00ff00;
      background: #004a00;
    }

    @keyframes dripBlood {
      0% { 
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
      }
      50% { 
        box-shadow: 
          0 0 30px rgba(0, 255, 0, 1),
          0 15px 35px rgba(255, 0, 0, 0.6);
      }
      100% { 
        box-shadow: 
          0 0 30px rgba(0, 255, 0, 0.8),
          0 20px 40px rgba(255, 0, 0, 0.4);
      }
    }

    /* Incorrect Answer - Red Glow */
    .quiz-option.incorrect {
      background: linear-gradient(135deg, #4a0000, #8b0000);
      border-color: #ff0000;
      animation: incorrectShake 0.6s ease-out;
      box-shadow: 0 0 25px rgba(255, 0, 0, 0.9);
    }

    .quiz-option.incorrect::before {
      border-color: #ff0000;
      background: #4a0000;
    }

    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-8px); }
      40%, 80% { transform: translateX(8px); }
    }

    .quiz-feedback {
      text-align: center;
      margin: 20px 0;
      font-size: 1.1em;
    }

    .quiz-feedback.correct {
      color: #00ff00;
    }

    .quiz-feedback.incorrect {
      color: #ff0000;
    }

    .skull-icon {
      font-size: 3em;
      animation: fadeIn 0.5s;
    }

    .quiz-results {
      text-align: center;
      padding: 20px;
    }

    .final-score {
      font-size: 3em;
      color: #ff0000;
      text-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
      margin: 20px 0;
    }

    .horror-title {
      font-size: 1.5em;
      color: #ff6b6b;
      margin: 15px 0;
      font-family: 'Creepster', cursive;
    }

    .quiz-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .quiz-close {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 2em;
      color: #8b0000;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-close:hover {
      color: #ff0000;
      transform: rotate(90deg);
    }

    /* Enter Next Chamber Button */
    .next-btn {
      padding: 15px 35px;
      background: linear-gradient(135deg, #8b0000, #4a0000);
      border: 3px solid #ff0000;
      color: white;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      margin: 20px auto;
      display: block;
      font-family: 'Bebas Neue', cursive;
      font-size: 1.2em;
      letter-spacing: 2px;
      box-shadow: 
        0 0 20px rgba(255, 0, 0, 0.5),
        0 6px 15px rgba(0, 0, 0, 0.8);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .next-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .next-btn:hover {
      background: linear-gradient(135deg, #ff0000, #8b0000);
      transform: translateY(-3px);
      box-shadow: 
        0 0 30px rgba(255, 0, 0, 0.8),
        0 8px 20px rgba(0, 0, 0, 0.9);
    }

    .next-btn:hover::before {
      left: 100%;
    }

    .next-btn:active {
      transform: translateY(0);
    }

    /* Loading state for button */
    .next-btn.loading {
      pointer-events: none;
      opacity: 0.7;
      animation: buttonPulse 1.5s ease-in-out infinite;
    }

    @keyframes buttonPulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 0.9; }
    }

    /* SCARY NAVIGATION BUTTONS */
    .horror-nav-btn {
      position: relative;
      padding: 10px 20px;
      font-size: 0.875rem;
      font-weight: bold;
      color: #fff;
      background: linear-gradient(135deg, #8b0000, #4a0000);
      border: 2px solid #ff0000;
      border-radius: 25px;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s ease;
      text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
    }

    .horror-nav-btn:hover {
      background: linear-gradient(135deg, #ff0000, #8b0000);
      box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);
      transform: translateY(-2px);
      border-color: #ff4444;
    }

    .horror-nav-btn::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #ff0000, #8b0000, #ff0000);
      z-index: -1;
      border-radius: 25px;
      opacity: 0;
      transition: opacity 0.3s ease;
      animation: borderPulse 2s infinite;
    }

    .horror-nav-btn:hover::before {
      opacity: 0.6;
    }

    @keyframes borderPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.7; }
    }

    /* NIGHTMARE PORTAL BUTTON - CINEMATIC HORROR CENTERPIECE */
    .nightmare-portal-btn {
      position: relative;
      padding: 18px 40px;
      font-size: 1.25rem;
      font-weight: 900;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 3px;
      background: linear-gradient(135deg, #1a0000 0%, #000000 50%, #1a0000 100%);
      border: 3px solid #00ff66;
      border-radius: 12px;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.4s ease;
      box-shadow: 
        0 0 30px rgba(0, 255, 102, 0.4),
        0 0 60px rgba(0, 255, 102, 0.2),
        inset 0 0 20px rgba(0, 255, 102, 0.1),
        0 8px 16px rgba(0, 0, 0, 0.6);
      transform: translateZ(0);
      perspective: 1000px;
      animation: breathingGlow 3s ease-in-out infinite;
    }

    .nightmare-text {
      position: relative;
      color: #ffffff;
      text-shadow: 
        0 0 10px #00ff66,
        0 0 20px #00ff66,
        0 0 30px #00ff66,
        2px 2px 4px rgba(0, 0, 0, 0.8);
      z-index: 2;
      display: inline-block;
      animation: textVibrate 0.3s ease-in-out infinite alternate;
    }

    /* Subtle text distortion/vibration */
    @keyframes textVibrate {
      0% { transform: translateX(0) translateY(0) skewX(0deg); }
      100% { transform: translateX(0.5px) translateY(-0.5px) skewX(0.3deg); }
    }

    /* Breathing fog-like glow */
    @keyframes breathingGlow {
      0%, 100% {
        box-shadow: 
          0 0 30px rgba(0, 255, 102, 0.4),
          0 0 60px rgba(0, 255, 102, 0.2),
          inset 0 0 20px rgba(0, 255, 102, 0.1),
          0 8px 16px rgba(0, 0, 0, 0.6);
      }
      50% {
        box-shadow: 
          0 0 40px rgba(0, 255, 102, 0.6),
          0 0 80px rgba(0, 255, 102, 0.3),
          inset 0 0 30px rgba(0, 255, 102, 0.15),
          0 10px 20px rgba(0, 0, 0, 0.7);
      }
    }

    /* Eerie green glow layer */
    .nightmare-glow {
      position: absolute;
      inset: -2px;
      background: radial-gradient(circle at center, rgba(0, 255, 102, 0.2) 0%, transparent 70%);
      border-radius: 12px;
      opacity: 0.6;
      z-index: 0;
      animation: glowPulse 2s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes glowPulse {
      0%, 100% { 
        opacity: 0.4;
        transform: scale(1);
      }
      50% { 
        opacity: 0.8;
        transform: scale(1.05);
      }
    }

    /* Drifting mist particles */
    .nightmare-particles {
      position: absolute;
      inset: 0;
      overflow: hidden;
      border-radius: 12px;
      pointer-events: none;
      z-index: 1;
    }

    .nightmare-particles::before,
    .nightmare-particles::after {
      content: '';
      position: absolute;
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, rgba(0, 255, 102, 0.15) 0%, transparent 70%);
      border-radius: 50%;
      filter: blur(8px);
      animation: driftParticle 8s ease-in-out infinite;
    }

    .nightmare-particles::before {
      top: -20px;
      left: -20px;
      animation-delay: 0s;
    }

    .nightmare-particles::after {
      bottom: -20px;
      right: -20px;
      animation-delay: 4s;
    }

    @keyframes driftParticle {
      0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.3;
      }
      25% {
        transform: translate(20px, -10px) scale(1.2);
        opacity: 0.6;
      }
      50% {
        transform: translate(0, -20px) scale(0.9);
        opacity: 0.4;
      }
      75% {
        transform: translate(-20px, -10px) scale(1.1);
        opacity: 0.5;
      }
    }

    /* Glass-like raised appearance with metallic hints */
    .nightmare-portal-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 0, 0, 0.05) 30%,
        transparent 60%,
        rgba(139, 0, 0, 0.1) 100%);
      border-radius: 10px;
      pointer-events: none;
      z-index: 1;
    }

    /* Red reflection hints for metallic/glass effect */
    .nightmare-portal-btn::after {
      content: '';
      position: absolute;
      top: 4px;
      left: 4px;
      right: 4px;
      height: 40%;
      background: linear-gradient(180deg, 
        rgba(255, 255, 255, 0.15) 0%, 
        rgba(255, 0, 0, 0.08) 50%,
        transparent 100%);
      border-radius: 8px 8px 50% 50%;
      pointer-events: none;
      z-index: 1;
    }

    /* HOVER STATE: Flicker red then fade back */
    .nightmare-portal-btn:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 
        0 0 50px rgba(0, 255, 102, 0.8),
        0 0 100px rgba(0, 255, 102, 0.4),
        inset 0 0 30px rgba(0, 255, 102, 0.2),
        0 12px 24px rgba(0, 0, 0, 0.8);
      animation: dangerFlicker 1s ease-in-out forwards, breathingGlow 3s ease-in-out infinite;
    }

    .nightmare-portal-btn:hover .nightmare-text {
      animation: textVibrate 0.1s ease-in-out infinite alternate, dangerTextPulse 1s ease-in-out;
    }

    /* Danger flicker: green intensifies, flashes red, fades back */
    @keyframes dangerFlicker {
      0% {
        border-color: #00ff66;
        background: linear-gradient(135deg, #1a0000 0%, #000000 50%, #1a0000 100%);
      }
      10%, 15%, 20% {
        border-color: #ff0000;
        background: linear-gradient(135deg, #3a0000 0%, #1a0000 50%, #3a0000 100%);
        box-shadow: 
          0 0 50px rgba(255, 0, 0, 0.8),
          0 0 100px rgba(255, 0, 0, 0.4),
          inset 0 0 30px rgba(255, 0, 0, 0.3);
      }
      25%, 100% {
        border-color: #00ff66;
        background: linear-gradient(135deg, #1a0000 0%, #000000 50%, #1a0000 100%);
      }
    }

    @keyframes dangerTextPulse {
      0% {
        text-shadow: 
          0 0 10px #00ff66,
          0 0 20px #00ff66,
          0 0 30px #00ff66;
      }
      10%, 15%, 20% {
        text-shadow: 
          0 0 15px #ff0000,
          0 0 30px #ff0000,
          0 0 45px #ff0000,
          2px 2px 4px rgba(0, 0, 0, 0.9);
      }
      25%, 100% {
        text-shadow: 
          0 0 15px #00ff66,
          0 0 30px #00ff66,
          0 0 45px #00ff66;
      }
    }

    /* Active/pressed state */
    .nightmare-portal-btn:active {
      transform: translateY(0) scale(1.02);
      box-shadow: 
        0 0 20px rgba(0, 255, 102, 0.6),
        0 0 40px rgba(0, 255, 102, 0.3),
        inset 0 0 25px rgba(0, 255, 102, 0.15),
        0 4px 8px rgba(0, 0, 0, 0.7);
    }
    
    /* Clicked state - green confirmation glow */
    .nightmare-portal-btn.clicked {
      background: linear-gradient(135deg, #16a34a, #15803d) !important;
      border-color: #22c55e !important;
      box-shadow: 
        0 0 50px rgba(34, 197, 94, 0.9),
        0 0 100px rgba(34, 197, 94, 0.6),
        inset 0 0 30px rgba(34, 197, 94, 0.3) !important;
      cursor: not-allowed;
      animation: nightmareGreenPulse 1.5s infinite !important;
    }
    
    .nightmare-portal-btn.clicked .nightmare-text {
      color: #fff !important;
      text-shadow: 0 0 20px #22c55e, 0 0 40px #22c55e !important;
    }
    
    @keyframes nightmareGreenPulse {
      0%, 100% {
        box-shadow: 
          0 0 40px rgba(34, 197, 94, 0.8),
          0 0 80px rgba(34, 197, 94, 0.5),
          inset 0 0 25px rgba(34, 197, 94, 0.3);
      }
      50% {
        box-shadow: 
          0 0 60px rgba(34, 197, 94, 1),
          0 0 120px rgba(34, 197, 94, 0.7),
          inset 0 0 35px rgba(34, 197, 94, 0.4);
      }
    }

    /* HEADER NIGHTMARE BUTTON - Compact version for header */
    .nightmare-portal-btn-header {
      position: relative;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: 700;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 2px;
      background: linear-gradient(135deg, #1a0000 0%, #000000 50%, #1a0000 100%);
      border: 2px solid #00ff66;
      border-radius: 8px;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 
        0 0 20px rgba(0, 255, 102, 0.3),
        0 0 40px rgba(0, 255, 102, 0.15),
        inset 0 0 15px rgba(0, 255, 102, 0.1),
        0 4px 8px rgba(0, 0, 0, 0.5);
      transform: translateZ(0);
      animation: breathingGlowHeader 3s ease-in-out infinite;
    }

    @keyframes breathingGlowHeader {
      0%, 100% {
        box-shadow: 
          0 0 20px rgba(0, 255, 102, 0.3),
          0 0 40px rgba(0, 255, 102, 0.15),
          inset 0 0 15px rgba(0, 255, 102, 0.1),
          0 4px 8px rgba(0, 0, 0, 0.5);
      }
      50% {
        box-shadow: 
          0 0 30px rgba(0, 255, 102, 0.5),
          0 0 60px rgba(0, 255, 102, 0.25),
          inset 0 0 20px rgba(0, 255, 102, 0.15),
          0 6px 12px rgba(0, 0, 0, 0.6);
      }
    }

    .nightmare-text-header {
      position: relative;
      color: #ffffff;
      text-shadow: 
        0 0 8px #00ff66,
        0 0 16px #00ff66,
        0 0 24px #00ff66,
        2px 2px 4px rgba(0, 0, 0, 0.8);
      z-index: 2;
      display: inline-block;
    }

    .nightmare-portal-btn-header:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 
        0 0 30px rgba(0, 255, 102, 0.6),
        0 0 60px rgba(0, 255, 102, 0.3),
        inset 0 0 20px rgba(0, 255, 102, 0.2),
        0 6px 12px rgba(0, 0, 0, 0.7);
      animation: dangerFlicker 1s ease-in-out forwards, breathingGlowHeader 3s ease-in-out infinite;
    }

    .nightmare-portal-btn-header:hover .nightmare-text-header {
      animation: textVibrate 0.1s ease-in-out infinite alternate, dangerTextPulse 1s ease-in-out;
    }

    .nightmare-portal-btn-header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.08) 0%, 
        rgba(255, 0, 0, 0.04) 30%,
        transparent 60%,
        rgba(139, 0, 0, 0.08) 100%);
      border-radius: 6px;
      pointer-events: none;
      z-index: 1;
    }

    /* NIGHTMARE QUIZ HERO SECTION WITH HORROR GRAPHICS */
    .nightmare-quiz-hero-section {
      min-height: 200px;
      overflow: hidden;
      position: relative;
    }

    .horror-graphics-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      opacity: 0.7;
    }

    /* OLD VINES - Twisted, decaying */
    .horror-vine {
      position: absolute;
      width: 150px;
      height: 300px;
      background: linear-gradient(to bottom, 
        rgba(20, 60, 20, 0.8) 0%,
        rgba(40, 80, 40, 0.6) 30%,
        rgba(30, 70, 30, 0.5) 60%,
        rgba(15, 50, 15, 0.4) 100%);
      border-radius: 50px 10px 50px 50px;
      transform-origin: top center;
      filter: blur(2px);
      opacity: 0.6;
      animation: vineSway 8s ease-in-out infinite;
    }

    .vine-left {
      left: 5%;
      top: -50px;
      transform: rotate(-25deg) skewX(-5deg);
      clip-path: polygon(20% 0%, 80% 0%, 75% 100%, 25% 100%);
    }

    .vine-right {
      right: 5%;
      top: -50px;
      transform: rotate(25deg) skewX(5deg);
      clip-path: polygon(20% 0%, 80% 0%, 75% 100%, 25% 100%);
      animation-name: vineSwayRight;
    }

    @keyframes vineSway {
      0%, 100% {
        transform: rotate(-25deg) skewX(-5deg) translateX(0);
      }
      50% {
        transform: rotate(-20deg) skewX(-3deg) translateX(10px);
      }
    }

    @keyframes vineSwayRight {
      0%, 100% {
        transform: rotate(25deg) skewX(5deg) translateX(0);
      }
      50% {
        transform: rotate(30deg) skewX(3deg) translateX(-10px);
      }
    }

    /* TOMBSTONE - Graveyard style */
    .horror-tombstone {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 140px;
      background: linear-gradient(135deg,
        rgba(120, 120, 120, 0.9) 0%,
        rgba(80, 80, 80, 0.8) 50%,
        rgba(60, 60, 60, 0.7) 100%);
      border-radius: 0 0 60px 60px / 0 0 40px 40px;
      box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.8),
        inset 0 -5px 10px rgba(0, 0, 0, 0.5),
        inset 0 5px 10px rgba(255, 255, 255, 0.1);
      filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.3));
      animation: tombstoneFloat 6s ease-in-out infinite;
      z-index: 2;
    }

    .horror-tombstone::before {
      content: 'RIP';
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Nosifer', cursive;
      font-size: 1.2rem;
      color: rgba(139, 0, 0, 0.9);
      text-shadow: 0 0 10px rgba(139, 0, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.9);
      letter-spacing: 4px;
      opacity: 0.8;
    }

    .horror-tombstone::after {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 20px;
      background: linear-gradient(to bottom,
        rgba(100, 100, 100, 0.9),
        rgba(80, 80, 80, 0.7));
      border-radius: 2px 2px 0 0;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    @keyframes tombstoneFloat {
      0%, 100% {
        transform: translateX(-50%) translateY(0) rotate(0deg);
        filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.3));
      }
      50% {
        transform: translateX(-50%) translateY(-5px) rotate(1deg);
        filter: drop-shadow(0 0 15px rgba(139, 0, 0, 0.5));
      }
    }

    /* HORROR MOVIE COLLAGE - Icons floating around */
    .horror-collage {
      position: absolute;
      inset: 0;
    }

    .collage-icon {
      position: absolute;
      font-size: 2.5rem;
      opacity: 0.4;
      filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.6));
      animation: floatIcon 10s ease-in-out infinite;
      pointer-events: none;
    }

    .icon-1 {
      top: 10%;
      left: 10%;
      animation-delay: 0s;
      --icon-rotate: -15deg;
    }

    .icon-2 {
      top: 15%;
      right: 15%;
      animation-delay: 1.5s;
      --icon-rotate: 20deg;
    }

    .icon-3 {
      bottom: 20%;
      left: 20%;
      animation-delay: 3s;
      --icon-rotate: -10deg;
    }

    .icon-4 {
      bottom: 25%;
      right: 25%;
      animation-delay: 4.5s;
      --icon-rotate: 15deg;
    }

    .icon-5 {
      top: 50%;
      left: 5%;
      animation-delay: 6s;
      --icon-rotate: -25deg;
    }

    .icon-6 {
      top: 45%;
      right: 5%;
      animation-delay: 7.5s;
      --icon-rotate: 25deg;
    }

    @keyframes floatIcon {
      0%, 100% {
        transform: translateY(0) translateX(0) rotate(var(--icon-rotate, 0deg));
        opacity: 0.3;
        filter: drop-shadow(0 0 8px rgba(255, 0, 0, 0.6));
      }
      25% {
        transform: translateY(-15px) translateX(10px) rotate(calc(var(--icon-rotate, 0deg) + 5deg));
        opacity: 0.5;
        filter: drop-shadow(0 0 12px rgba(255, 0, 0, 0.8));
      }
      50% {
        transform: translateY(-10px) translateX(-5px) rotate(calc(var(--icon-rotate, 0deg) - 3deg));
        opacity: 0.4;
        filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.7));
      }
      75% {
        transform: translateY(-20px) translateX(8px) rotate(calc(var(--icon-rotate, 0deg) + 4deg));
        opacity: 0.6;
        filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.9));
      }
    }

    /* Enhanced button styling for the centered section */
    .nightmare-quiz-hero-section .nightmare-portal-btn {
      position: relative;
      z-index: 10;
      transform: scale(1.1);
      box-shadow: 
        0 0 40px rgba(0, 255, 102, 0.5),
        0 0 80px rgba(0, 255, 102, 0.3),
        inset 0 0 25px rgba(0, 255, 102, 0.15),
        0 10px 20px rgba(0, 0, 0, 0.7),
        0 0 0 2px rgba(139, 0, 0, 0.3);
    }

    .nightmare-quiz-hero-section .nightmare-portal-btn:hover {
      transform: scale(1.15) translateY(-3px);
      box-shadow: 
        0 0 60px rgba(0, 255, 102, 0.9),
        0 0 120px rgba(0, 255, 102, 0.5),
        inset 0 0 35px rgba(0, 255, 102, 0.25),
        0 15px 30px rgba(0, 0, 0, 0.8),
        0 0 0 3px rgba(139, 0, 0, 0.5);
    }

    /* Dark fog/mist effect around the section */
    .nightmare-quiz-hero-section::before {
      content: '';
      position: absolute;
      inset: -20px;
      background: radial-gradient(ellipse at center,
        rgba(0, 0, 0, 0.6) 0%,
        rgba(0, 0, 0, 0.4) 40%,
        transparent 70%);
      z-index: 0;
      pointer-events: none;
      animation: horrorFogDrift 12s ease-in-out infinite;
    }

    @keyframes horrorFogDrift {
      0%, 100% {
        opacity: 0.7;
        transform: translateX(0) translateY(0);
      }
      50% {
        opacity: 0.9;
        transform: translateX(10px) translateY(-10px);
      }
    }
  </style>
  <style>
    /* Dungeon background and swinging light */
    #dungeon-bg {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at var(--light-x, 50%) var(--light-y, 20%), rgba(255,255,210,0.07), rgba(0,0,0,0.95) 60%),
        repeating-linear-gradient(0deg, #1b1b1b 0 46px, #141414 46px 48px),
        repeating-linear-gradient(90deg, #161616 0 92px, #0f0f0f 92px 94px);
      background-blend-mode: screen, normal, normal;
      filter: saturate(0.85) contrast(1.1);
      animation: swingLight 6s ease-in-out infinite;
      opacity: 0.6;
    }
    @keyframes swingLight {
      0% { --light-x: 30%; --light-y: 18%; }
      50% { --light-x: 70%; --light-y: 28%; }
      100% { --light-x: 30%; --light-y: 18%; }
    }

    /* Jason-style mask overlay when answer is incorrect */
    #mask-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.9) 70%);
      z-index: 3000;
      pointer-events: none;
      animation: maskFade 1.2s ease forwards;
    }
    #mask-overlay .mask {
      width: min(40vw, 260px);
      height: min(52vw, 320px);
      background: url('horror.jpg') center/cover no-repeat;
      filter: drop-shadow(0 0 25px rgba(255,0,0,0.6)) saturate(0.9) contrast(1.05);
      animation: maskZoom 1.1s ease both;
      border-radius: 4px;
    }
    @keyframes maskZoom {
      0% { transform: scale(0.6) rotate(-2deg); opacity: 0; }
      20% { opacity: 1; }
      60% { transform: scale(1.1) rotate(2deg); }
      100% { transform: scale(1); opacity: 0.0; }
    }
    @keyframes maskFade {
      0%, 80% { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
  <style>
    /* Dungeon background and lighting */
    #dungeon-bg {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at var(--light-x, 50%) var(--light-y, 20%), rgba(255,255,210,0.07), rgba(0,0,0,0.95) 60%),
        repeating-linear-gradient(0deg, #1b1b1b 0 46px, #141414 46px 48px),
        repeating-linear-gradient(90deg, #161616 0 92px, #0f0f0f 92px 94px);
      background-blend-mode: screen, normal, normal;
      filter: saturate(0.85) contrast(1.1);
      animation: swingLight 6s ease-in-out infinite;
      opacity: 0.6;
    }
    @keyframes swingLight {
      0% { --light-x: 30%; --light-y: 18%; }
      50% { --light-x: 70%; --light-y: 28%; }
      100% { --light-x: 30%; --light-y: 18%; }
    }

    /* Jason-style mask overlay for incorrect answers */
    #mask-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.9) 70%);
      z-index: 3000;
      pointer-events: none;
      animation: maskFade 1.2s ease forwards;
    }
    #mask-overlay .mask {
      width: min(40vw, 260px);
      height: min(52vw, 320px);
      background: url('horror.jpg') center/cover no-repeat;
      filter: drop-shadow(0 0 25px rgba(255,0,0,0.6)) saturate(0.9) contrast(1.05);
      animation: maskZoom 1.1s ease both;
      border-radius: 4px;
    }
    @keyframes maskZoom {
      0% { transform: scale(0.6) rotate(-2deg); opacity: 0; }
      20% { opacity: 1; }
      60% { transform: scale(1.1) rotate(2deg); }
      100% { transform: scale(1); opacity: 0.0; }
    }
    @keyframes maskFade {
      0%, 80% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* CINEMATIC INTRO OVERLAY - SLIDESHOW */
    #nightmare-intro-overlay {
      position: fixed;
      inset: 0;
      z-index: 5000;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .intro-bg-slideshow {
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    .intro-bg-image {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      opacity: 0;
      filter: grayscale(100%) brightness(0.5);
      transition: opacity 2s ease-in-out;
    }

    .intro-bg-image.active {
      opacity: 0.75;
    }

    .intro-text-container {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 2rem;
      max-width: 800px;
    }

    .intro-line {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.5rem;
      color: #ff0000;
      text-shadow: 
        0 0 20px rgba(255, 0, 0, 0.8),
        0 0 40px rgba(255, 0, 0, 0.6),
        0 0 60px rgba(255, 0, 0, 0.4);
      opacity: 0;
      margin-bottom: 1.5rem;
      letter-spacing: 2px;
      animation: pulseLine 2s ease-in-out infinite;
    }

    .intro-line.visible {
      animation: fadeInLine 1.5s ease-out forwards, pulseLine 2s ease-in-out infinite;
    }

    .intro-line.loading-pulse {
      font-size: 1.2rem !important;
      opacity: 0.7;
    }

    .intro-line .dots {
      display: inline-block;
      animation: dotPulse 1.5s ease-in-out infinite;
    }

    @keyframes dotPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    @keyframes fadeInLine {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulseLine {
      0%, 100% {
        text-shadow: 
          0 0 20px rgba(255, 0, 0, 0.8),
          0 0 40px rgba(255, 0, 0, 0.6),
          0 0 60px rgba(255, 0, 0, 0.4);
      }
      50% {
        text-shadow: 
          0 0 30px rgba(255, 0, 0, 1),
          0 0 60px rgba(255, 0, 0, 0.8),
          0 0 90px rgba(255, 0, 0, 0.6);
      }
    }

    .intro-fade-out {
      animation: fadeOutOverlay 1.5s ease-out forwards;
    }

    @keyframes fadeOutOverlay {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }

    /* NEW HORROR INTRO TEXT SCREEN */
    #horror-text-intro {
      position: fixed;
      inset: 0;
      z-index: 5001;
      background: linear-gradient(135deg, #0a0000 0%, #1a0000 50%, #0a0000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .horror-intro-content {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 3rem;
      max-width: 900px;
    }

    .horror-intro-title {
      font-family: 'Creepster', cursive;
      font-size: 3.5rem;
      color: #ff0000;
      text-shadow: 
        0 0 30px rgba(255, 0, 0, 1),
        0 0 60px rgba(255, 0, 0, 0.8),
        0 0 90px rgba(255, 0, 0, 0.6);
      margin-bottom: 2.5rem;
      animation: horrorTitlePulse 3s ease-in-out infinite;
      letter-spacing: 3px;
    }

    @keyframes horrorTitlePulse {
      0%, 100% {
        text-shadow: 
          0 0 30px rgba(255, 0, 0, 1),
          0 0 60px rgba(255, 0, 0, 0.8),
          0 0 90px rgba(255, 0, 0, 0.6);
      }
      50% {
        text-shadow: 
          0 0 45px rgba(255, 0, 0, 1),
          0 0 90px rgba(255, 0, 0, 1),
          0 0 120px rgba(255, 0, 0, 0.8);
      }
    }

    .horror-intro-text {
      font-family: 'Bebas Neue', cursive;
      font-size: 1.5rem;
      color: #e0e0e0;
      line-height: 1.8;
      margin-bottom: 1.2rem;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
      letter-spacing: 1px;
      opacity: 0;
      animation: fadeInText 1s ease-out forwards;
    }

    .horror-intro-text:nth-child(2) { animation-delay: 0.3s; }
    .horror-intro-text:nth-child(3) { animation-delay: 0.6s; }
    .horror-intro-text:nth-child(4) { animation-delay: 0.9s; }
    .horror-intro-text:nth-child(5) { animation-delay: 1.2s; }

    @keyframes fadeInText {
      from {
        opacity: 0;
        transform: translateY(15px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .horror-intro-buttons {
      margin-top: 3rem;
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      opacity: 0;
      animation: fadeInText 1s ease-out 1.5s forwards;
    }

    .horror-intro-btn {
      padding: 18px 40px;
      font-size: 1.2rem;
      font-weight: bold;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 2px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 3px solid;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
    }

    .horror-intro-btn.google-signin {
      background: linear-gradient(135deg, #8b0000, #4a0000);
      border-color: #ff0000;
      color: white;
    }

    .horror-intro-btn.google-signin:hover {
      background: linear-gradient(135deg, #ff0000, #8b0000);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 12px 24px rgba(255, 0, 0, 0.6);
    }

    .horror-intro-btn.continue-without {
      background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
      border-color: #666;
      color: #e0e0e0;
    }

    .horror-intro-btn.continue-without:hover {
      background: linear-gradient(135deg, #3a3a3a, #2a2a2a);
      border-color: #888;
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 12px 24px rgba(255, 255, 255, 0.3);
    }

    .horror-text-intro-fade-out {
      animation: fadeOutOverlay 1s ease-out forwards;
    }

    /* Blood drip background effect for intro */
    .horror-intro-bg-effect {
      position: absolute;
      inset: 0;
      z-index: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.8) 0%, transparent 100%);
      filter: blur(60px);
      animation: bgShift 8s ease-in-out infinite;
    }

    @keyframes bgShift {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 0.9; }
    }

    /* ===== ORACLE ENGINE FEAR LEVEL EFFECTS ===== */
    
    /* Oracle fade-in animation */
    @keyframes oracleFadeIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Reward popup animation */
    @keyframes rewardFadeIn {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    /* Fear Level 0-30: Faint red glow */
    body.fear-low {
      background-image: linear-gradient(to bottom, #200122, #060107);
      box-shadow: inset 0 0 80px rgba(185, 28, 28, 0.1);
    }
    
    body.fear-low::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9998;
      box-shadow: inset 0 0 100px rgba(185, 28, 28, 0.15);
    }
    
    /* Fear Level 31-60: Pulsing red light */
    body.fear-medium {
      background-image: linear-gradient(to bottom, #2a0122, #0a0107);
      animation: fearPulseMedium 3s ease-in-out infinite;
    }
    
    body.fear-medium::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9998;
      box-shadow: inset 0 0 150px rgba(185, 28, 28, 0.3);
      animation: fearGlowMedium 2s ease-in-out infinite;
    }
    
    @keyframes fearPulseMedium {
      0%, 100% {
        box-shadow: inset 0 0 100px rgba(185, 28, 28, 0.2);
      }
      50% {
        box-shadow: inset 0 0 150px rgba(185, 28, 28, 0.4);
      }
    }
    
    @keyframes fearGlowMedium {
      0%, 100% {
        opacity: 0.6;
      }
      50% {
        opacity: 1;
      }
    }
    
    /* Fear Level 61-85: Fog and screen flicker */
    body.fear-high {
      background-image: linear-gradient(to bottom, #3a0122, #100107);
      animation: fearFlicker 0.3s ease-in-out infinite;
    }
    
    body.fear-high::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9998;
      background: radial-gradient(circle at 50% 50%, transparent 0%, rgba(139, 0, 0, 0.4) 100%);
      box-shadow: inset 0 0 200px rgba(185, 28, 28, 0.5);
      animation: fearFog 4s ease-in-out infinite;
    }
    
    body.fear-high::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9999;
      background: rgba(0, 0, 0, 0.1);
      animation: screenFlicker 0.1s infinite;
    }
    
    @keyframes fearFlicker {
      0%, 100% {
        filter: brightness(1);
      }
      50% {
        filter: brightness(0.9);
      }
    }
    
    @keyframes fearFog {
      0%, 100% {
        opacity: 0.5;
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        transform: scale(1.1);
      }
    }
    
    @keyframes screenFlicker {
      0%, 90%, 100% {
        opacity: 0;
      }
      95% {
        opacity: 0.3;
      }
    }
    
    /* Fear Level 85+: Heavy vignette and intense effects */
    body.fear-extreme {
      background-image: linear-gradient(to bottom, #4a0122, #180107);
      animation: fearShake 0.15s ease-in-out infinite, fearPulseExtreme 2s ease-in-out infinite;
    }
    
    body.fear-extreme::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9998;
      background: radial-gradient(circle at 50% 50%, transparent 0%, rgba(139, 0, 0, 0.7) 80%, rgba(0, 0, 0, 0.9) 100%);
      box-shadow: inset 0 0 300px rgba(185, 28, 28, 0.8);
      animation: extremeVignette 1.5s ease-in-out infinite;
    }
    
    body.fear-extreme::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 9999;
      background: rgba(255, 0, 0, 0.05);
      animation: bloodPulseExtreme 1s infinite;
    }
    
    @keyframes fearShake {
      0%, 100% {
        transform: translateX(0);
      }
      25% {
        transform: translateX(-2px);
      }
      75% {
        transform: translateX(2px);
      }
    }
    
    @keyframes fearPulseExtreme {
      0%, 100% {
        filter: brightness(0.8) saturate(1.2);
      }
      50% {
        filter: brightness(1) saturate(1.5);
      }
    }
    
    @keyframes extremeVignette {
      0%, 100% {
        opacity: 0.8;
      }
      50% {
        opacity: 1;
      }
    }
    
    @keyframes bloodPulseExtreme {
      0%, 100% {
        opacity: 0.1;
      }
      50% {
        opacity: 0.3;
      }
    }
    
    /* Oracle-specific button hover effects */
    .oracle-begin-btn:hover,
    .oracle-next-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(185, 28, 28, 0.8) !important;
    }
    
    /* Oracle button clicked state - green glow effect */
    .oracle-begin-btn.clicked {
      background: linear-gradient(135deg, #16a34a, #15803d) !important;
      box-shadow: 0 0 30px rgba(22, 163, 74, 0.8), 0 0 50px rgba(22, 163, 74, 0.5) !important;
      transform: scale(1.02);
      cursor: not-allowed;
      animation: greenPulse 1.5s infinite;
    }
    
    @keyframes greenPulse {
      0%, 100% {
        box-shadow: 0 0 30px rgba(22, 163, 74, 0.8), 0 0 50px rgba(22, 163, 74, 0.5);
      }
      50% {
        box-shadow: 0 0 40px rgba(22, 163, 74, 1), 0 0 60px rgba(22, 163, 74, 0.7);
      }
    }
    
    /* ===== END ORACLE ENGINE FEAR LEVEL EFFECTS ===== */

    /* ===== CINEMATIC ORACLE TRIAL SCREEN STYLING ===== */
    .oracle-intro-container {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      min-height: 100vh !important;
      height: 100vh !important;
      padding: 0 !important;
      text-align: center !important;
      background: radial-gradient(circle at center, #000000 60%, #1a0000 100%) !important;
      overflow: hidden !important;
      position: relative !important;
    }

    /* Main title: "THE ORACLE'S TRIAL" */
    .oracle-main-title {
      font-family: 'Cinzel', serif !important;
      font-weight: 700 !important;
      letter-spacing: 2px !important;
      text-shadow: 0 0 25px #ff0000, 0 0 60px #8b0000 !important;
      color: #ff1a1a !important;
      font-size: 2.5rem !important;
      text-align: center !important;
      position: relative !important;
      overflow: visible !important;
      margin-bottom: 2rem !important;
    }

    /* Chamber title styling (e.g. "THE VAULT OF SHADOWS") */
    .oracle-room-title {
      font-family: 'Spectral SC', serif !important;
      font-weight: 600 !important;
      color: #ff4444 !important;
      text-align: center !important;
      margin-top: 1rem !important;
      font-size: 1.8rem !important;
      text-transform: uppercase !important;
      letter-spacing: 1px !important;
      text-shadow: 0 0 15px rgba(255, 68, 68, 0.6) !important;
    }

    .oracle-intro-text {
      display: none !important; /* Hide intro text for cleaner look */
    }

    /* Blood drip animation */
    @keyframes drip {
      0% { 
        transform: translateY(0); 
        opacity: 1; 
        height: 6px; 
      }
      100% { 
        transform: translateY(90vh); 
        opacity: 0; 
        height: 30px; 
      }
    }

    .blood-drip {
      position: absolute;
      width: 2px;
      background: linear-gradient(to bottom, #ff0000, #330000);
      animation: drip 2.5s linear forwards;
      pointer-events: none;
      z-index: 1;
    }

    .drip-container {
      position: relative;
      display: inline-block;
    }

    /* ENTER NIGHTMARE button */
    .oracle-begin-btn {
      padding: 12px 40px !important;
      background: linear-gradient(90deg, #7a0000, #ff0000) !important;
      color: #fff !important;
      border: none !important;
      border-radius: 6px !important;
      font-size: 1.2rem !important;
      font-weight: 700 !important;
      font-family: 'Cinzel', serif !important;
      text-transform: uppercase !important;
      letter-spacing: 2px !important;
      cursor: pointer !important;
      box-shadow: 0 0 25px #ff0000 !important;
      transition: all 0.3s ease !important;
      margin-top: 3rem !important;
      position: relative !important;
      overflow: hidden !important;
      z-index: 10 !important;
      animation: pulseGlow 2.5s infinite ease-in-out;
      /* Delayed appearance */
      opacity: 0;
      transform: translateY(20px);
      animation: buttonFadeIn 0.8s ease-out 1.5s forwards, pulseGlow 2.5s 2.3s infinite ease-in-out;
    }

    @keyframes buttonFadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulseGlow {
      0%, 100% {
        box-shadow: 0 0 20px #ff0000;
        transform: scale(1);
      }
      50% {
        box-shadow: 0 0 40px #ff3333;
        transform: scale(1.05);
      }
    }

    .oracle-begin-btn:hover {
      transform: scale(1.08) !important;
      box-shadow: 0 0 50px #ff0000 !important;
      animation: none !important; /* Stop pulse on hover */
    }

    /* Remove fear meter */
    #fear-meter,
    .fear-meter-container {
      display: none !important;
    }

    .oracle-lore-whisper {
      display: none !important; /* Hide lore whisper for cleaner design */
    }

    /* ===== END CINEMATIC ORACLE TRIAL SCREEN ===== */

    /* ===== CINEMATIC SLIDESHOW OVERLAY ===== */
    .slideshow-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #000;
        z-index: 10000;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }

    .slideshow-overlay.active {
        opacity: 1;
    }

    .slideshow-container {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .slideshow-images {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }

    .slideshow-image {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(1);
        width: auto;
        max-width: 90vw;
        max-height: 90vh;
        height: auto;
        object-fit: contain;
        opacity: 0;
        filter: grayscale(100%) contrast(1.2) brightness(0.9);
        transition: opacity 1.5s ease-in-out, transform 2s ease-out;
        z-index: 1;
    }

    .slideshow-image.active {
        opacity: 1;
        animation: slowZoom 2s ease-out forwards;
    }

    @keyframes slowZoom {
        0% {
            transform: translate(-50%, -50%) scale(1);
        }
        100% {
            transform: translate(-50%, -50%) scale(1.1);
        }
    }

    .slideshow-title {
        position: absolute;
        top: 15%;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        z-index: 2;
        pointer-events: none;
    }

    .slideshow-text {
        font-family: 'Nosifer', cursive;
        font-size: 4rem;
        color: #fff;
        text-shadow: 
            0 0 20px rgba(255, 0, 0, 0.8),
            0 0 40px rgba(139, 0, 0, 0.6),
            0 0 60px rgba(139, 0, 0, 0.4);
        animation: textPulse 2s ease-in-out infinite;
        margin: 0;
    }

    .slideshow-subtitle {
        font-family: 'Creepster', cursive;
        font-size: 1.5rem;
        color: #aaa;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        margin-top: 1rem;
        opacity: 0.8;
    }

    @keyframes textPulse {
        0%, 100% {
            text-shadow: 
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 40px rgba(139, 0, 0, 0.6),
                0 0 60px rgba(139, 0, 0, 0.4);
        }
        50% {
            text-shadow: 
                0 0 30px rgba(255, 0, 0, 1),
                0 0 60px rgba(139, 0, 0, 0.8),
                0 0 80px rgba(139, 0, 0, 0.6);
        }
    }

    .slideshow-progress-bar {
        position: absolute;
        bottom: 5%;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
        z-index: 2;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }

    .slideshow-progress-fill {
        width: 0%;
        height: 100%;
        background: linear-gradient(90deg, #8B0000, #FF0000, #8B0000);
        background-size: 200% 100%;
        animation: progressFill 10s linear forwards, bloodFlow 2s linear infinite;
        border-radius: 3px;
    }

    @keyframes progressFill {
        0% { width: 0%; }
        100% { width: 100%; }
    }

    @keyframes bloodFlow {
        0% { background-position: 0% 50%; }
        100% { background-position: 200% 50%; }
    }

    /* REMOVED: Start Trials Button - No longer needed as slideshow fades directly to Oracle Trial */

    /* Vignette effect for slideshow */
    .slideshow-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, transparent 30%, rgba(0, 0, 0, 0.7) 100%);
        z-index: 1;
        pointer-events: none;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .slideshow-text {
            font-size: 2.5rem;
        }
        .slideshow-subtitle {
            font-size: 1rem;
        }
        /* REMOVED: start-trials-btn media query */
    }
    /* ===== END CINEMATIC SLIDESHOW OVERLAY ===== */

    /* ===== BLOOD DRIP ANIMATION ===== */
    #blood-drip-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }

    @keyframes bloodDrip {
      0% { 
        transform: translateY(-100%); 
        opacity: 1; 
      }
      80% { 
        transform: translateY(80vh); 
        opacity: 1; 
      }
      100% { 
        transform: translateY(100vh); 
        opacity: 0; 
      }
    }

    @keyframes bloodShake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }

    .blood-drip-correct {
      background: linear-gradient(to bottom, #ff1a1a, #cc0000);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      filter: drop-shadow(0 0 8px #ff1a1a);
    }

    .blood-drip-wrong {
      background: linear-gradient(to bottom, #800000, #4d0000);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      filter: drop-shadow(0 0 5px #800000);
    }

    body.shake {
      animation: bloodShake 0.6s ease-in-out;
    }
    /* ===== END BLOOD DRIP ANIMATION ===== */

    /* ===== HORROR FLASH BACKGROUND ===== */
    #horror-flash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1s ease-in-out;
      z-index: 0;
    }
    /* ===== END HORROR FLASH BACKGROUND ===== */
  </style>
</head>
<body>
    <div id="storm-bg"></div>
    <div id="dungeon-bg" class="fixed top-0 left-0 w-full h-full -z-10 pointer-events-none"></div>
    <div id="horror-flash"></div>

    <div class="centered-container mx-auto">
        <header class="w-full flex justify-between items-center p-4">
            <div class="flex items-center flex-1 gap-4">
                <h1 class="nosifer text-4xl text-white logo-glow">Horror Oracle</h1>
                <button onclick="startQuiz()" class="nightmare-portal-btn-header">
                    <div class="nightmare-glow"></div>
                    <div class="nightmare-particles"></div>
                    <span class="nightmare-text-header">WELCOME TO YOUR NIGHTMARE</span>
                </button>
            </div>
            <div class="md:flex hidden items-center space-x-4 flex-1 justify-end">
                <span id="user-status" class="text-sm text-gray-400">Not signed in</span>
                <div id="google-login-btn"></div>
                <button id="sign-out-btn" onclick="signOutUser()" style="display: none;" 
                        class="px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded transition-colors">
                    Sign Out
                </button>
                <div class="w-8 h-8 rounded-full bg-red-800 flex items-center justify-center text-white text-xs font-bold">HO</div>
            </div>
        </header>

        <div class="container">
            <!-- LEFT SIDEBAR: Theater, Streaming, My List -->
            <aside class="side-panel hidden md:flex flex-col">
                <!-- PHASE 1: Horror Profile Badge (NEW) -->
                <div id="horror-profile-section" class="profile-badge-container hidden">
                    <div class="profile-icon" id="profile-icon">üéÉ</div>
                    <div class="profile-name" id="profile-name">Horror Fan</div>
                </div>

                <!-- AI-ADAPTIVE QUIZ: Horror DNA Tracker -->
                <div id="horror-dna-section" class="profile-badge-container" style="background: linear-gradient(135deg, rgba(0, 100, 0, 0.3), rgba(0, 0, 0, 0.6)); border-color: #00ff66;">
                    <div class="text-center mb-2">
                        <div class="text-2xl mb-1">üß¨</div>
                        <div class="text-xs text-green-400 font-bold" style="letter-spacing: 1px;">HORROR DNA</div>
                    </div>
                    <div id="horror-dna-stats" class="text-xs text-gray-300 space-y-1">
                        <div class="flex justify-between">
                            <span>Quizzes:</span>
                            <span id="dna-quiz-count" class="text-green-400 font-bold">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Fear Tolerance:</span>
                            <span id="dna-fear-tolerance" class="text-green-400 font-bold">50%</span>
                        </div>
                        <div id="dna-themes" class="mt-2 text-center text-xs text-green-300"></div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2 class="side-panel-title">Now Playing</h2>

                    <div class="theater-section" id="theater-section-dynamic">
                        <h3 class="text-center text-sm font-bold text-white mb-2" style="text-shadow: 0 0 10px rgba(255, 0, 0, 0.8); animation: pulse 2s infinite;">üé¨ NOW IN THEATERS üé¨</h3>
                        <!-- Dynamic content will be loaded here -->
                        <div class="theater-loading text-center text-gray-400 text-xs">Loading current releases...</div>
                    </div>
                </div>

                <div class="border-t border-red-900 my-3 opacity-50"></div>

                <div class="sidebar-section">
                    <h2 class="trailer-title">Watch Trailer</h2>
                    <div id="streaming-container" class="space-y-3 max-h-96 overflow-y-auto">
                        <p class="text-xs text-center text-gray-400 mb-3">Search for a movie to see streaming options</p>
                    </div>
                </div>

                <div class="border-t border-red-900 my-3 opacity-50"></div>

                <div class="sidebar-section">
                    <h2 class="side-panel-title" id="my-list-title">MY LIST</h2>
                    <ul id="my-list-container" class="space-y-1 text-gray-400" style="font-size: 0.6rem; max-height: 100px; overflow-y: auto;">
                        <li class="text-center">Empty</li>
                    </ul>
                </div>
            </aside>

            <!-- CHAT WINDOW -->
            <main class="chat-window">
                <div id="chat-history" class="chat-history">
                    <div class="bot-bubble bg-gray-800 text-base" style="padding: 0.4rem;">
                        <p class="mb-1 text-red-500 font-bold text-lg">ü©∏ Horror Oracle ü©∏</p>
                        <p class="text-white mb-1 font-medium text-base leading-snug">Welcome, mortal. I am your gateway to the darkest depths of cinema.</p>
                        <p class="text-white mb-1 leading-snug">I possess knowledge of EVERY horror film ever created. Search for anything that haunts your nightmares:</p>
                        <div class="flex flex-wrap gap-2 mb-1" id="genre-tags-container">
                            <span class="horror-genre-tag" onclick="handleGenreClick('slashers')">üî™ SLASHERS</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('zombies')">üßü ZOMBIES</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('vampires')">ü¶á VAMPIRES</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('gore-fests')">ü©∏ GORE FESTS</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('supernatural')">üëª SUPERNATURAL</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('demons')">üòà DEMONS</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('psycho-killers')">ü™ì PSYCHO KILLERS</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('alien-horror')">üëΩ ALIEN HORROR</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('creature-features')">üï∑Ô∏è CREATURE FEATURES</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('haunted-houses')">üèöÔ∏è HAUNTED HOUSES</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('psychological')">üé≠ PSYCHOLOGICAL</span>
                            <span class="horror-genre-tag" onclick="handleGenreClick('cult-horror')">‚õ™ CULT HORROR</span>
                        </div>
                        <p class="text-gray-300 text-sm leading-snug mb-1"><strong>Discover the undiscovered:</strong> Obscure Italian giallo ‚Ä¢ Japanese J-horror ‚Ä¢ 80s slashers ‚Ä¢ Modern elevated horror ‚Ä¢ Grindhouse gore ‚Ä¢ Classic Universal monsters ‚Ä¢ Found footage nightmares</p>
                        <p class="text-red-400 text-sm font-bold mb-1">Type any movie title, director name, or horror subgenre. I will reveal everything...</p>
                    </div>
                </div>

                <!-- Main Hero Horror Image -->
                <div id="initial-horror-image" class="flex flex-col items-center justify-center my-6 px-4">
                    <img src="horror.jpg" alt="Horror" class="rounded-lg border-2 border-red-700 shadow-lg" style="max-width: 600px; width: 100%; max-height: 500px; height: auto; object-fit: contain;">
                </div>

                <div class="chat-input-area">
                    <input type="text" id="user-input" placeholder="Type a movie, director, or subgenre..." class="flex-1 px-4 py-3 rounded-full bg-gray-800 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-600 transition-all duration-200">
                    <button id="send-btn" class="px-6 py-3 bg-red-600 text-white rounded-full font-bold hover:bg-red-700 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </button>
                </div>
            
                <!-- TRAILER IFRAME ADDED (Horror Oracle - Embedded Trailer) -->
<div id="trailer-frame-container" class="w-full flex justify-center my-4" style="display:none; position:relative;">
  <button class="trailer-close-btn" onclick="closeTrailer()">√ó</button>
  <iframe id="trailer-iframe"
    width="420"
    height="236"
    frameborder="0"
    allowfullscreen
    class="rounded-lg border-2 border-red-700 shadow-lg"
    style="background:#000;">
  </iframe>
</div>
<!-- END TRAILER IFRAME -->
            </main>

            <!-- RIGHT SIDEBAR: Stacked Similar Movies and Community Stats -->
            <aside class="side-panel hidden md:flex flex-col">
                
                <!-- PHASE 1: FOR YOU SECTION (Replaces SIMILAR MOVIES when logged in) -->
                <div class="compact-section">
                    <h2 class="compact-title" id="recommendations-title">SIMILAR MOVIES</h2>
                    <p id="for-you-subtitle" class="text-xs text-center text-gray-400 mb-2 hidden"></p>
                    <div id="recommendations-container" class="space-y-1" style="max-height: 200px; overflow-y: auto;">
                        <div class="text-center p-2">
                            <p class="text-gray-400" style="font-size: 0.6rem;">Search for a movie</p>
                        </div>
                    </div>
                </div>

                <div class="border-t border-red-900 my-2 opacity-30"></div>

                <!-- COMMUNITY STATS SECTION (Always Visible) -->
                <div class="compact-section">
                    <h2 class="compact-title">COMMUNITY STATS</h2>
                    <div id="community-stats-container">
                        <!-- Movie title will appear here -->
                        <div id="current-movie-display" class="hidden">
                            <div class="current-movie-title" id="stats-movie-title" style="font-size: 0.8rem;">No Movie Selected</div>
                            
                            <!-- Community Rating Display -->
                            <div class="stats-container" style="padding: 6px;">
                                <div class="rating-display" style="margin-bottom: 8px;">
                                    <span class="stars-display" id="community-stars" style="font-size: 1rem;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                    <div>
                                        <span class="rating-number" id="rating-value" style="font-size: 0.9rem;">0.0</span>
                                        <div class="rating-count" id="rating-count" style="font-size: 0.6rem;">(0 ratings)</div>
                                    </div>
                                </div>
                                
                                <!-- Horror Metrics -->
                                <div class="horror-metrics" style="margin-bottom: 8px;">
                                    <div class="metric-bar" style="margin-bottom: 6px;">
                                        <div class="metric-label" style="font-size: 0.65rem;">
                                            <span>ü©∏ Gore</span>
                                            <span id="gore-value">0%</span>
                                        </div>
                                        <div class="metric-progress" style="height: 6px;">
                                            <div class="metric-fill gore-fill" id="gore-bar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-bar" style="margin-bottom: 6px;">
                                        <div class="metric-label" style="font-size: 0.65rem;">
                                            <span>üò± Fear</span>
                                            <span id="fear-value">0/10</span>
                                        </div>
                                        <div class="metric-progress" style="height: 6px;">
                                            <div class="metric-fill fear-fill" id="fear-bar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-bar">
                                        <div class="metric-label" style="font-size: 0.65rem;">
                                            <span>üíÄ Kills</span>
                                            <span id="kill-value">0</span>
                                        </div>
                                        <div class="metric-progress" style="height: 6px;">
                                            <div class="metric-fill kill-fill" id="kill-bar" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Rate This Movie Section -->
                            <div class="rate-movie-section" style="padding: 8px;">
                                <div class="rate-prompt" style="font-size: 0.7rem;">Rate this movie:</div>
                                <div class="star-rating" id="user-rating">
                                    <span class="star" data-rating="1" style="font-size: 1.2rem;">‚òÜ</span>
                                    <span class="star" data-rating="2" style="font-size: 1.2rem;">‚òÜ</span>
                                    <span class="star" data-rating="3" style="font-size: 1.2rem;">‚òÜ</span>
                                    <span class="star" data-rating="4" style="font-size: 1.2rem;">‚òÜ</span>
                                    <span class="star" data-rating="5" style="font-size: 1.2rem;">‚òÜ</span>
                                </div>
                            </div>
                            
                            <!-- Quick Review Section -->
                            <div class="quick-review-section" style="padding: 0 8px;">
                                <input type="text" class="review-input" id="review-input" placeholder="Quick thoughts..." maxlength="100" style="font-size: 0.65rem; padding: 4px 6px;">
                                <button class="submit-review-btn" onclick="submitReview()" style="font-size: 0.65rem; padding: 4px;">Submit Review</button>
                            </div>
                            
                            <!-- Recent Reviews -->
                            <div class="recent-reviews" id="recent-reviews" style="max-height: 80px; padding: 0 8px;">
                                <div class="review-item" style="padding: 4px; font-size: 0.6rem;">
                                    <div class="review-text">No reviews yet. Be the first!</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- No Movie Selected State -->
                        <div id="no-movie-selected" class="text-center p-2">
                            <p class="text-gray-400" style="font-size: 0.65rem;">Search for a movie to see stats</p>
                        </div>
                    </div>
                </div>

                <div class="border-t border-red-900 my-2 opacity-30"></div>

                <!-- OBSCURE HORROR GEMS (Increased size) -->
                <div class="compact-section">
                    <h2 class="compact-title">OBSCURE GEMS</h2>
                    <div class="obscure-movies-grid" style="grid-template-columns: 1fr 1fr; min-height: 160px;">
                        <!-- Dynamic content will be loaded here by loadDailyObscureGems() -->
                    </div>
                </div>

                <button class="info-btn w-full px-3 py-2 bg-black text-white text-center rounded-full font-bold mt-2 text-xs">
                    About the Oracle
                </button>
            </aside>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="video-modal" class="video-modal">
        <div class="video-container">
            <span class="video-close">&times;</span>
            <iframe id="video-iframe" class="video-iframe" src="" allowfullscreen></iframe>
        </div>
    </div>

    <!-- QUIZ MODAL - CINEMATIC HORROR REDESIGN -->
    <div id="quizModal" class="quiz-modal">
        <div class="quiz-content">
            <span class="quiz-close" onclick="closeQuiz()">&times;</span>
            
            <!-- Header with The Oracle's Trial -->
            <div class="quiz-header">
                <h2 class="quiz-title">The Oracle's Trial</h2>
                <p id="quizMovieTitle" style="color: #8b8b8b;"></p>
            </div>
            
            <!-- Fear Level / Loading Indicator -->
            <div class="quiz-progress">
                <!-- Fear Level Display (hidden during loading, shown after) -->
                <div class="fear-level-container" id="fearLevelDisplay" style="display: none;">
                    <span id="fearLevelText">Fear Level: 50</span>
                </div>
                
                <!-- Bloody Dagger Loading Animation (shown during loading) -->
                <div class="bloody-dagger-container" id="bloodyDaggerLoader" style="display: none;">
                    <div class="bloody-dagger-fill"></div>
                </div>
                
                <!-- Progress Bar (shown during quiz) -->
                <div style="display: flex; align-items: center; gap: 15px; width: 100%;" id="quizProgressBar">
                    <span class="progress-text" id="progressText">1/10</span>
                    <div class="progress-axe" style="flex: 1;">
                        <div class="blood-fill" id="bloodFill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Oracle Speaks Section (dynamically shown/hidden) -->
            <div class="oracle-speaks-section" id="oracleSpeaksSection" style="display: none;">
                <h3 class="oracle-speaks-title">The Oracle Speaks</h3>
                <p class="oracle-speaks-text" id="oracleSpeaksText"></p>
            </div>

            <!-- Quiz Body -->
            <div id="quizBody">
                <!-- Quiz content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Audio for quiz sounds -->
    <audio id="correctSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTgKGGS57OScTgwLUKzn4rVhGAUzmNn1yHkrBh955vLTgjQNF1+z6+ylVhUIQ5vj9sRyJAUyg9T10HksCi994fXTgjQNF1+z6+ylVhUIQ5vj9sRyJAUyg9T10HksCi594fXT" type="audio/wav">
    </audio>
    
    <audio id="wrongSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAABiYmJiYmJhYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmFiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmFiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmFiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmFiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmFiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJpYmJiYmJiYmFiYmJp" type="audio/wav">
    </audio>

    <script src="script-js-combined.js"></script>
    
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer onload="initGoogleSignIn()"></script>
    <script>
      // PHASE 1: Global user variable
      let currentHorrorUser = null;

      function initGoogleSignIn() {
        // Wait for google object to be fully loaded
        if (typeof google === 'undefined' || !google.accounts || !google.accounts.id) {
          console.error('Google Sign-In library not loaded');
          setTimeout(initGoogleSignIn, 100);
          return;
        }

        try {
          google.accounts.id.initialize({
            client_id: '383630092112-5vqj924hq2n44tjk1gpb3bisokfab50m.apps.googleusercontent.com',
            callback: handleCredentialResponse,
            auto_select: false,
            cancel_on_tap_outside: true
          });
          
          const buttonDiv = document.getElementById("google-login-btn");
          if (buttonDiv) {
            google.accounts.id.renderButton(
              buttonDiv,
              { theme: "filled_black", size: "medium", text: "signin_with" }
            );
          }

          // Check for existing user in localStorage
          const savedUser = localStorage.getItem('horrorUser');
          if (savedUser) {
            const userObject = JSON.parse(savedUser);
            currentHorrorUser = userObject;
            const userStatus = document.getElementById('user-status');
            if (userStatus) {
              userStatus.textContent = `Hi, ${userObject.name}!`;
            }
            // Hide the Google Sign-In button since user is already logged in
            if (buttonDiv) {
              buttonDiv.style.display = 'none';
            }
            // Show the sign-out button
            const signOutBtn = document.getElementById('sign-out-btn');
            if (signOutBtn) {
              signOutBtn.style.display = 'block';
            }
            updateUIForUser(userObject.name);
            loadUserData(userObject.sub);
          }
        } catch (error) {
          console.error('Error initializing Google Sign-In:', error);
        }
      }

      function handleCredentialResponse(response) {
        const userObject = JSON.parse(atob(response.credential.split('.')[1]));
        currentHorrorUser = userObject;
        
        document.getElementById('user-status').textContent = `Hi, ${userObject.name}!`;
        localStorage.setItem('horrorUser', JSON.stringify(userObject));
        
        // Hide the Google Sign-In button after successful login
        const googleBtn = document.getElementById('google-login-btn');
        if (googleBtn) {
          googleBtn.style.display = 'none';
        }
        
        // Show the sign-out button
        const signOutBtn = document.getElementById('sign-out-btn');
        if (signOutBtn) {
          signOutBtn.style.display = 'block';
        }
        
        updateUIForUser(userObject.name);
        loadUserData(userObject.sub);
        
        console.log("User signed in:", userObject.name);
        
        // NEW: Check if there's a pending quiz and continue with it
        if (window.pendingMovieTitle && window.pendingQuizData) {
          // Start the quiz IMMEDIATELY to prevent showing main page
          proceedToQuiz(window.pendingMovieTitle, window.pendingQuizData);
          
          // Then remove the text intro overlay after a brief moment
          setTimeout(() => {
            const textIntro = document.getElementById('horror-text-intro');
            if (textIntro) {
              textIntro.classList.add('horror-text-intro-fade-out');
              setTimeout(() => {
                textIntro.remove();
              }, 500);
            }
          }, 200);
          
          // Clear pending quiz data after using it
          window.pendingMovieTitle = null;
          window.pendingQuizData = null;
        }
      }

      function updateUIForUser(name) {
        const listTitle = document.getElementById('my-list-title');
        if (listTitle) {
          listTitle.textContent = `${name.toUpperCase()}'S LIST`;
        }
      }

      function signOutUser() {
        // Clear user data
        currentHorrorUser = null;
        localStorage.removeItem('horrorUser');
        
        // Update UI
        const userStatus = document.getElementById('user-status');
        if (userStatus) {
          userStatus.textContent = 'Not signed in';
        }
        
        // Show Google Sign-In button again
        const googleBtn = document.getElementById('google-login-btn');
        if (googleBtn) {
          googleBtn.style.display = 'block';
        }
        
        // Hide sign-out button
        const signOutBtn = document.getElementById('sign-out-btn');
        if (signOutBtn) {
          signOutBtn.style.display = 'none';
        }
        
        // Reset list title
        const listTitle = document.getElementById('my-list-title');
        if (listTitle) {
          listTitle.textContent = 'MY LIST';
        }
        
        // Sign out from Google
        if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
          google.accounts.id.disableAutoSelect();
        }
        
        console.log('User signed out');
      }

      // PHASE 1: Complete loadUserData function
      function loadUserData(googleId) {
        fetch('/get-user-data', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({googleId: googleId})
        })
        .then(r => r.json())
        .then(data => {
          // Display user's list in the sidebar
          if (data.myList && data.myList.length > 0) {
            const container = document.getElementById('my-list-container');
            if (container) {
              container.innerHTML = data.myList.map(movie => 
                `<li class="text-white cursor-pointer hover:text-red-500 mb-1">${movie}</li>`
              ).join('');
            }
          }
          
          // PHASE 1: Load personalized content if user has profile data
          if (data.horror_profile || data.genre_searches) {
            loadHorrorProfile(googleId);
            loadPersonalizedRecommendations(googleId);
          }
        })
        .catch(error => console.error('Error loading user data:', error));
      }

      function addToMyList(movieTitle) {
        const user = JSON.parse(localStorage.getItem('horrorUser'));
        if (!user) {
          alert('Please sign in with Google to save movies to your list!');
          return;
        }
        
        fetch('/save-to-list', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            googleId: user.sub,
            movie: movieTitle
          })
        })
        .then(r => r.json())
        .then(data => {
          if (data.success) {
            // Update the sidebar list
            const container = document.getElementById('my-list-container');
            if (container) {
              container.innerHTML = data.list.map(movie => 
                `<li class="text-white cursor-pointer hover:text-red-500 mb-1">${movie}</li>`
              ).join('');
            }
            
            // Show success message
            alert(`Added "${movieTitle}" to your list!`);
          }
        })
        .catch(error => {
          console.error('Error saving to list:', error);
          alert('Error saving movie to your list.');
        });
      }

      function saveUserRating(movieTitle, rating) {
        const user = JSON.parse(localStorage.getItem('horrorUser'));
        if (!user) {
          alert('Please sign in to rate movies!');
          return;
        }
        
        fetch('/save-rating', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            googleId: user.sub,
            movie: movieTitle,
            rating: rating
          })
        })
        .then(r => r.json())
        .then(data => {
          if (data.success) {
            console.log(`Rating saved: ${movieTitle} - ${rating} stars`);
          }
        })
        .catch(error => console.error('Error saving rating:', error));
      }

      // PHASE 1: Load horror profile
      async function loadHorrorProfile(googleId) {
        try {
          const response = await fetch('/get-horror-profile', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({googleId: googleId})
          });
          const data = await response.json();
          
          if (data.horror_profile) {
            // Show profile section
            const profileSection = document.getElementById('horror-profile-section');
            if (profileSection) {
              profileSection.classList.remove('hidden');
              
              // Set profile name
              const profileName = document.getElementById('profile-name');
              if (profileName) {
                profileName.textContent = data.horror_profile;
              }
              
              // Set icon based on profile
              const profileIcons = {
                "Slasher Fan": "üî™",
                "Zombie Enthusiast": "üßü",
                "Vampire Lover": "üßõ",
                "Gore Hound": "üíâ",
                "Supernatural Seeker": "üëª",
                "Demon Hunter": "üòà",
                "Psycho Thriller Fan": "üî´",
                "Sci-Fi Horror Fan": "üëΩ",
                "Monster Movie Buff": "ü¶ñ",
                "Haunted House Explorer": "üèöÔ∏è",
                "Mind Bender": "üß†",
                "Cult Classic Connoisseur": "üïØÔ∏è",
                "Horror Enthusiast": "üéÉ",
                "New Horror Fan": "üéÉ"
              };
              
              const icon = profileIcons[data.horror_profile] || "üéÉ";
              const profileIcon = document.getElementById('profile-icon');
              if (profileIcon) {
                profileIcon.textContent = icon;
              }
            }
          }
        } catch (error) {
          console.error('Error loading horror profile:', error);
        }
      }

      // PHASE 1: Load personalized recommendations
      async function loadPersonalizedRecommendations(googleId) {
        try {
          const response = await fetch('/get-personalized-recommendations', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({googleId: googleId})
          });
          const data = await response.json();
          
          if (data.recommendations && data.recommendations.length > 0) {
            // Update title to "FOR YOU"
            const recsTitle = document.getElementById('recommendations-title');
            if (recsTitle) {
              recsTitle.textContent = 'FOR YOU';
            }
            
            // Update subtitle
            const subtitle = document.getElementById('for-you-subtitle');
            if (subtitle) {
              subtitle.textContent = `Because you love ${data.based_on_genre}`;
              subtitle.classList.remove('hidden');
            }
            
            // Display recommendations using existing function
            if (typeof updateRecommendations === 'function') {
              updateRecommendations(data.recommendations);
            }
          }
        } catch (error) {
          console.error('Error loading personalized recommendations:', error);
        }
      }
    </script>



    <script>
    function closeTrailer() {
      document.getElementById('trailer-frame-container').style.display = 'none';
      document.getElementById('trailer-iframe').src = '';
    }
    </script>

    <!-- FEAR METER OVERLAY -->
    <div id="fear-meter-overlay" class="fear-meter-overlay">
      <div class="fear-meter-container">
        <!-- Oracle Emotion Display -->
        <div class="oracle-emotion-display">
          <div class="oracle-eye" id="oracle-eye">üëÅÔ∏è</div>
          <div class="oracle-emotion-text" id="oracle-emotion-text">OBSERVING</div>
        </div>

        <!-- Fear Level Bar -->
        <div class="fear-meter-bar-container">
          <div class="fear-meter-label">
            <span>FEAR LEVEL</span>
            <span id="fear-level-value">50%</span>
          </div>
          <div class="fear-meter-bar">
            <div class="fear-meter-fill" id="fear-meter-fill" style="width: 50%">
              <div class="fear-meter-pulse"></div>
            </div>
          </div>
        </div>

        <!-- Oracle Intensity Indicator -->
        <div class="oracle-intensity-display">
          <span class="intensity-label">ORACLE INTENSITY</span>
          <div class="intensity-dots" id="intensity-dots">
            <span class="intensity-dot"></span>
            <span class="intensity-dot"></span>
            <span class="intensity-dot"></span>
            <span class="intensity-dot"></span>
            <span class="intensity-dot"></span>
          </div>
        </div>
      </div>
    </div>

    <style>
      /* Fear Meter Overlay */
      .fear-meter-overlay {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1500;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.5s ease;
        pointer-events: none;
      }

      .fear-meter-overlay.active {
        opacity: 1;
        transform: translateX(0);
      }

      .fear-meter-container {
        background: linear-gradient(135deg, rgba(10, 0, 0, 0.95), rgba(26, 0, 0, 0.95));
        border: 2px solid #8b0000;
        border-radius: 15px;
        padding: 20px;
        min-width: 280px;
        box-shadow: 
          0 0 30px rgba(255, 0, 0, 0.5),
          inset 0 0 20px rgba(139, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        animation: containerPulse 3s ease-in-out infinite;
      }

      @keyframes containerPulse {
        0%, 100% {
          box-shadow: 
            0 0 30px rgba(255, 0, 0, 0.5),
            inset 0 0 20px rgba(139, 0, 0, 0.3);
        }
        50% {
          box-shadow: 
            0 0 50px rgba(255, 0, 0, 0.8),
            inset 0 0 30px rgba(139, 0, 0, 0.5);
        }
      }

      /* Oracle Emotion Display */
      .oracle-emotion-display {
        text-align: center;
        margin-bottom: 15px;
        animation: emotionFloat 4s ease-in-out infinite;
      }

      @keyframes emotionFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
      }

      .oracle-eye {
        font-size: 3rem;
        filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.8));
        animation: eyeBlink 4s ease-in-out infinite;
        display: inline-block;
      }

      @keyframes eyeBlink {
        0%, 100%, 90%, 92%, 94% { transform: scaleY(1); }
        91%, 93% { transform: scaleY(0.1); }
      }

      .oracle-emotion-text {
        font-family: 'Bebas Neue', cursive;
        font-size: 1.2rem;
        color: #ff0000;
        text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        letter-spacing: 2px;
        margin-top: 8px;
        animation: textGlow 2s ease-in-out infinite;
      }

      @keyframes textGlow {
        0%, 100% {
          text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }
        50% {
          text-shadow: 0 0 20px rgba(255, 0, 0, 1);
        }
      }

      /* Fear Meter Bar */
      .fear-meter-bar-container {
        margin-bottom: 15px;
      }

      .fear-meter-label {
        display: flex;
        justify-content: space-between;
        font-family: 'Bebas Neue', cursive;
        font-size: 0.9rem;
        color: #e0e0e0;
        margin-bottom: 8px;
        letter-spacing: 1px;
      }

      #fear-level-value {
        color: #ff6b6b;
        font-weight: bold;
      }

      .fear-meter-bar {
        height: 25px;
        background: rgba(139, 0, 0, 0.3);
        border: 2px solid #4a0000;
        border-radius: 12px;
        overflow: hidden;
        position: relative;
        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6);
      }

      .fear-meter-fill {
        height: 100%;
        background: linear-gradient(90deg, #8b0000, #ff0000, #ff6b6b);
        border-radius: 10px;
        transition: width 1s ease, background 0.5s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
      }

      .fear-meter-pulse {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: pulseSlide 2s ease-in-out infinite;
      }

      @keyframes pulseSlide {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(200%); }
      }

      /* Fear level states */
      .fear-meter-fill.low {
        background: linear-gradient(90deg, #004a00, #00ff00, #7fff7f);
        box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
      }

      .fear-meter-fill.medium {
        background: linear-gradient(90deg, #8b6b00, #ffaa00, #ffcc66);
        box-shadow: 0 0 15px rgba(255, 170, 0, 0.6);
      }

      .fear-meter-fill.high {
        background: linear-gradient(90deg, #8b0000, #ff0000, #ff6b6b);
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.6);
        animation: fearShake 0.3s ease-in-out infinite;
      }

      .fear-meter-fill.extreme {
        background: linear-gradient(90deg, #4a0000, #8b0000, #ff0000);
        box-shadow: 0 0 25px rgba(255, 0, 0, 1);
        animation: fearShake 0.15s ease-in-out infinite, fearFlash 1s ease-in-out infinite;
      }

      @keyframes fearShake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-2px); }
        75% { transform: translateX(2px); }
      }

      @keyframes fearFlash {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
      }

      /* Oracle Intensity Display */
      .oracle-intensity-display {
        text-align: center;
      }

      .intensity-label {
        font-family: 'Bebas Neue', cursive;
        font-size: 0.8rem;
        color: #999;
        letter-spacing: 1px;
        display: block;
        margin-bottom: 8px;
      }

      .intensity-dots {
        display: flex;
        justify-content: center;
        gap: 8px;
      }

      .intensity-dot {
        width: 12px;
        height: 12px;
        background: rgba(139, 0, 0, 0.3);
        border: 1px solid #4a0000;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      .intensity-dot.active {
        background: #ff0000;
        border-color: #ff6b6b;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        animation: dotPulse 1s ease-in-out infinite;
      }

      @keyframes dotPulse {
        0%, 100% {
          transform: scale(1);
          box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }
        50% {
          transform: scale(1.2);
          box-shadow: 0 0 20px rgba(255, 0, 0, 1);
        }
      }

      /* Emotion-specific animations */
      .oracle-emotion-display.amused .oracle-eye {
        animation: eyeSmirk 2s ease-in-out infinite;
      }

      @keyframes eyeSmirk {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(5deg); }
      }

      .oracle-emotion-display.impressed .oracle-eye {
        filter: drop-shadow(0 0 20px rgba(0, 255, 102, 0.8));
        animation: eyeGlow 1.5s ease-in-out infinite;
      }

      @keyframes eyeGlow {
        0%, 100% {
          filter: drop-shadow(0 0 20px rgba(0, 255, 102, 0.8));
        }
        50% {
          filter: drop-shadow(0 0 30px rgba(0, 255, 102, 1));
        }
      }

      .oracle-emotion-display.disappointed .oracle-eye {
        animation: eyeDim 2s ease-in-out infinite;
        filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.6));
      }

      @keyframes eyeDim {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
      }

      .oracle-emotion-display.mocking .oracle-eye {
        animation: eyeShake 0.5s ease-in-out infinite;
      }

      @keyframes eyeShake {
        0%, 100% { transform: rotate(0deg); }
        25% { transform: rotate(-10deg); }
        75% { transform: rotate(10deg); }
      }

      /* Mobile responsiveness */
      @media (max-width: 768px) {
        .fear-meter-overlay {
          top: 10px;
          right: 10px;
        }

        .fear-meter-container {
          min-width: 220px;
          padding: 15px;
        }

        .oracle-eye {
          font-size: 2.5rem;
        }

        .oracle-emotion-text {
          font-size: 1rem;
        }
      }
    </style>

    <script>
      // Fear Meter Control System
      const FearMeterControl = {
        overlay: null,
        fillElement: null,
        valueElement: null,
        emotionElement: null,
        eyeElement: null,
        dotsContainer: null,
        emotionDisplay: null,
        
        // Initialize the fear meter
        init() {
          this.overlay = document.getElementById('fear-meter-overlay');
          this.fillElement = document.getElementById('fear-meter-fill');
          this.valueElement = document.getElementById('fear-level-value');
          this.emotionElement = document.getElementById('oracle-emotion-text');
          this.eyeElement = document.getElementById('oracle-eye');
          this.dotsContainer = document.getElementById('intensity-dots');
          this.emotionDisplay = document.querySelector('.oracle-emotion-display');
        },
        
        // Show the fear meter
        show() {
          if (this.overlay) {
            this.overlay.classList.add('active');
          }
        },
        
        // Hide the fear meter
        hide() {
          if (this.overlay) {
            this.overlay.classList.remove('active');
          }
        },
        
        // Update fear level (0-100)
        updateFearLevel(fearLevel) {
          if (!this.fillElement || !this.valueElement) return;
          
          const clampedLevel = Math.max(0, Math.min(100, fearLevel));
          
          // Update bar width
          this.fillElement.style.width = clampedLevel + '%';
          this.valueElement.textContent = Math.round(clampedLevel) + '%';
          
          // Update bar color based on level
          this.fillElement.classList.remove('low', 'medium', 'high', 'extreme');
          if (clampedLevel < 30) {
            this.fillElement.classList.add('low');
          } else if (clampedLevel < 60) {
            this.fillElement.classList.add('medium');
          } else if (clampedLevel < 85) {
            this.fillElement.classList.add('high');
          } else {
            this.fillElement.classList.add('extreme');
          }
        },
        
        // Update Oracle emotion
        updateOracleEmotion(emotion, intensity = 0.5) {
          if (!this.emotionElement || !this.eyeElement) return;
          
          const emotionMap = {
            'amused': { text: 'AMUSED', eye: 'üòè', class: 'amused' },
            'impressed': { text: 'IMPRESSED', eye: 'üëÅÔ∏è', class: 'impressed' },
            'disappointed': { text: 'DISAPPOINTED', eye: 'üòê', class: 'disappointed' },
            'mocking': { text: 'MOCKING', eye: 'üòà', class: 'mocking' },
            'indifferent': { text: 'OBSERVING', eye: 'üëÅÔ∏è', class: 'indifferent' },
            'intrigued': { text: 'INTRIGUED', eye: 'üëÄ', class: 'intrigued' },
            'pleased': { text: 'PLEASED', eye: 'üòä', class: 'pleased' },
            'annoyed': { text: 'ANNOYED', eye: 'üò†', class: 'annoyed' }
          };
          
          const emotionData = emotionMap[emotion.toLowerCase()] || emotionMap['indifferent'];
          
          // Update text and eye
          this.emotionElement.textContent = emotionData.text;
          this.eyeElement.textContent = emotionData.eye;
          
          // Update emotion-specific animation
          this.emotionDisplay.classList.remove('amused', 'impressed', 'disappointed', 'mocking', 'indifferent', 'intrigued', 'pleased', 'annoyed');
          this.emotionDisplay.classList.add(emotionData.class);
          
          // Update intensity dots
          this.updateIntensity(intensity);
        },
        
        // Update Oracle intensity (0-1)
        updateIntensity(intensity) {
          if (!this.dotsContainer) return;
          
          const dots = this.dotsContainer.querySelectorAll('.intensity-dot');
          const activeCount = Math.round(intensity * dots.length);
          
          dots.forEach((dot, index) => {
            if (index < activeCount) {
              dot.classList.add('active');
            } else {
              dot.classList.remove('active');
            }
          });
        },
        
        // Update from oracle state object
        updateFromOracleState(oracleState) {
          if (!oracleState) return;
          
          // Update fear level from player state
          if (oracleState.player_state && oracleState.player_state.fear_level !== undefined) {
            this.updateFearLevel(oracleState.player_state.fear_level);
          }
          
          // Update Oracle emotion and intensity
          if (oracleState.oracle_emotion) {
            const intensity = oracleState.intensity || 0.5;
            this.updateOracleEmotion(oracleState.oracle_emotion, intensity);
          }
        },
        
        // Pulse animation for significant events
        pulse() {
          if (this.overlay) {
            this.overlay.style.animation = 'none';
            setTimeout(() => {
              this.overlay.style.animation = '';
            }, 10);
          }
        }
      };
      
      // Initialize on page load
      document.addEventListener('DOMContentLoaded', () => {
        FearMeterControl.init();
        
        // Example: Show fear meter during quiz
        // You can call this when the quiz starts
        // FearMeterControl.show();
        // FearMeterControl.updateFearLevel(50);
        // FearMeterControl.updateOracleEmotion('observing', 0.5);
      });
      
      // Make it globally accessible
      window.FearMeterControl = FearMeterControl;
    </script>

    <!-- ===== CINEMATIC SLIDESHOW OVERLAY ===== -->
    <div id="introSlideshow" class="slideshow-overlay" style="display: none;">
        <div class="slideshow-container">
            <div class="slideshow-images">
                <img src="butcher.png" alt="The Butcher" class="slideshow-image active">
                <img src="preecher.png" alt="The Preacher" class="slideshow-image">
                <img src="doctormad.png" alt="The Doctor" class="slideshow-image">
                <img src="terrifiedwomen.png" alt="Terrified Souls" class="slideshow-image">
                <img src="screams.png" alt="Screams" class="slideshow-image">
                <img src="zombsing.png" alt="The Risen" class="slideshow-image">
            </div>
            <div class="slideshow-title">
                <h1 class="slideshow-text">The Oracle Awakens...</h1>
                <p class="slideshow-subtitle">Your Nightmares Are Gathering</p>
            </div>
            <div class="slideshow-progress-bar">
                <div class="slideshow-progress-fill"></div>
            </div>
        </div>
        <!-- REMOVED: "Start Your Trials Now" button - slideshow now fades directly to Oracle Trial -->
    </div>

    <!-- Blood Drip Animation Overlay -->
    <div id="blood-drip-overlay"></div>

    <!-- ================= HORROR FLASH EFFECT ================= -->
    <script>
      // ================= HORROR FLASH SCRIPT =================

      // Array of horror images to rotate - full list from /static/images/horror_flash/
      const horrorImages = [
        "/static/images/horror_flash/butcher.jpg",
        "/static/images/horror_flash/butcher.png",
        "/static/images/horror_flash/doctor.png",
        "/static/images/horror_flash/doctormad.png",
        "/static/images/horror_flash/dung.png",
        "/static/images/horror_flash/freddyblackwhite.png",
        "/static/images/horror_flash/gyell.png",
        "/static/images/horror_flash/jasonlike.png",
        "/static/images/horror_flash/possessed_woman.jpg",
        "/static/images/horror_flash/preecher.png",
        "/static/images/horror_flash/priest.jpg",
        "/static/images/horror_flash/psycodemented.png",
        "/static/images/horror_flash/scaryzombiesingle.png",
        "/static/images/horror_flash/screams.png",
        "/static/images/horror_flash/shadow_face.jpg",
        "/static/images/horror_flash/spalding.png",
        "/static/images/horror_flash/terrifiedwomen.png",
        "/static/images/horror_flash/texaschainsawgirl.png",
        "/static/images/horror_flash/zombie girl screaming.png",
        "/static/images/horror_flash/zombie.jpg",
        "/static/images/horror_flash/zombiegroup1.png",
        "/static/images/horror_flash/zombiegrouphellraiser.png",
        "/static/images/horror_flash/zombsing.png"
      ];

      const flash = document.getElementById("horror-flash");

      // Function to show random horror image with subtle fade
      // Fade in ~1s, hold at opacity 0.45, then fade out ~1s
      function showHorrorFlash() {
        if (!flash) return;
        
        const randomImage =
          horrorImages[Math.floor(Math.random() * horrorImages.length)];
        flash.style.backgroundImage = `url(${randomImage})`;
        
        // Fade in to opacity 0.45 over ~1s
        flash.style.transition = "opacity 1s ease-in-out";
        flash.style.opacity = "0.45";
        
        // Hold at opacity 0.45, then fade out over ~1s
        setTimeout(() => {
          flash.style.transition = "opacity 1s ease-in-out";
          flash.style.opacity = "0";
        }, 1500); // Hold for a moment before fading out
      }

      // Start 10 seconds after load, then repeat every 20‚Äì45 seconds randomly
      setTimeout(() => {
        function triggerFlash() {
          showHorrorFlash();
          // Random delay between 20‚Äì45 seconds for next flash
          const randomDelay = Math.random() * 25000 + 20000;
          setTimeout(triggerFlash, randomDelay);
        }
        triggerFlash();
      }, 10000); // initial delay (10 seconds)
    </script>
    <!-- ================= END HORROR FLASH EFFECT ================= -->

    <!-- ================= HORROR STORM BACKGROUND ================= -->
<style>
  /* base storm layer behind everything */
  #storm-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -11;
    pointer-events: none;
    background: rgba(0,0,0,0.4);
    overflow: hidden;
  }

  /* rain effect */
  #storm-bg::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      linear-gradient(0deg, rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 2px 100px;
    animation: rainMove 0.4s linear infinite;
    opacity: 0.15;
  }

  /* lightning flash overlay */
  #storm-bg::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0) 80%);
    opacity: 0;
    transition: opacity 0.1s ease-out;
    pointer-events: none;
  }

  /* Lightning flash animation */
  #storm-bg.flash::after {
    opacity: 1;
  }

  @keyframes rainMove {
    from {background-position: 0 0;}
    to {background-position: 0 100px;}
  }
</style>

<script>
  const stormBg = document.getElementById("storm-bg");

  function triggerLightning() {
    // Flash the ::after pseudo-element (white lightning overlay)
    stormBg.classList.add("flash");
    setTimeout(() => {
      stormBg.classList.remove("flash");
    }, 200);
  }

  function triggerBloodTint() {
    const overlay = document.createElement("div");
    overlay.style.position = "fixed";
    overlay.style.top = 0;
    overlay.style.left = 0;
    overlay.style.width = "100%";
    overlay.style.height = "100%";
    overlay.style.backgroundColor = "rgba(120,0,0,0.25)";
    overlay.style.zIndex = 3;
    overlay.style.pointerEvents = "none";
    overlay.style.transition = "opacity 0.7s ease-out";
    document.body.appendChild(overlay);
    setTimeout(() => (overlay.style.opacity = "0"), 700);
    setTimeout(() => overlay.remove(), 1400);
  }

  function randomStorm() {
    const delay = Math.random() * 15000 + 15000; // 15‚Äì30s between strikes
    triggerLightning();
    if (Math.random() < 0.3) triggerBloodTint(); // 30% chance for subtle blood tint
    setTimeout(randomStorm, delay);
  }

  setTimeout(randomStorm, 8000); // start storm after 8s
</script>
<!-- ================= END HORROR STORM BACKGROUND ================= -->
</body>
</html>

